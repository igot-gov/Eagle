(window.webpackJsonp=window.webpackJsonp||[]).push([[78],{dDvn:function(n,e,t){"use strict";t.r(e);var l=t("8Y7J");class i{}var a=t("pMnS"),o=t("SVse"),r=t("bujt"),c=t("Fwaw"),u=t("5GAg"),s=t("omvX"),d=t("Mz6y"),b=t("QQfA"),h=t("hOhj"),p=t("/HVE"),m=t("IP0z"),g=t("cUpR"),f=t("Mr+X"),v=t("Gi4r"),C=t("06aW"),k=t("qKkb"),w=t("s7LF"),x=t("dFDH"),S=t("s6ns"),y=t("jDHC"),M=t("88ff"),G=t("IHMU"),I=t("fwBP"),E=t("MMX8"),_=t("kQB2"),P=t("kT2h"),O=t("TPUF"),D=t("bKtt"),N=t("9LXF"),T=t("iInd"),A=t("c4Wm"),L=t("BV1i"),$=t("DkaU"),B=t("AaDx"),F=t("2Q+G"),U=t("gavF");class R{constructor(){this.action=new l.m}ngOnInit(){}click(n,e){this.action.emit({action:n,type:e})}}var Q=l.sb({encapsulation:0,styles:[[".new-img[_ngcontent-%COMP%]{background-repeat:no-repeat;display:inline-block;fill:currentColor;height:17px;width:24px}.type-container[_ngcontent-%COMP%]{letter-spacing:0;display:flex;align-items:center}.type-container[_ngcontent-%COMP%]   .rotate-90[_ngcontent-%COMP%]{transform:rotate(-90deg)}.type-container[_ngcontent-%COMP%]   .custom-icon[_ngcontent-%COMP%]{width:18px;height:18px;font-size:18px;margin-right:8px}.type-container[_ngcontent-%COMP%]   .resource[_ngcontent-%COMP%]{color:#00a9f4}.type-container[_ngcontent-%COMP%]   .module[_ngcontent-%COMP%]{color:#34d6a4}.type-container[_ngcontent-%COMP%]   .course[_ngcontent-%COMP%]{color:#f58634}.type-container[_ngcontent-%COMP%]   .program[_ngcontent-%COMP%]{color:#003f5c}"]],data:{}});function j(n){return l.Qb(0,[(n()(),l.ub(0,0,null,null,2,"mat-icon",[["class","mr-1 custom-icon resource rotate-90 mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,f.b,f.a)),l.tb(1,9158656,null,0,v.b,[l.k,v.d,[8,null],[2,v.a]],null,null),(n()(),l.Ob(2,0,[""," "]))],(function(n,e){n(e,1,0)}),(function(n,e){n(e,0,0,l.Gb(e,1).inline,"primary"!==l.Gb(e,1).color&&"accent"!==l.Gb(e,1).color&&"warn"!==l.Gb(e,1).color),n(e,2,0,e.parent.parent.context.$implicit.icon)}))}function q(n){return l.Qb(0,[(n()(),l.ub(0,0,null,null,2,"mat-icon",[["class","mr-1 custom-icon module rotate-90 mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,f.b,f.a)),l.tb(1,9158656,null,0,v.b,[l.k,v.d,[8,null],[2,v.a]],null,null),(n()(),l.Ob(2,0,[""," "]))],(function(n,e){n(e,1,0)}),(function(n,e){n(e,0,0,l.Gb(e,1).inline,"primary"!==l.Gb(e,1).color&&"accent"!==l.Gb(e,1).color&&"warn"!==l.Gb(e,1).color),n(e,2,0,e.parent.parent.context.$implicit.icon)}))}function z(n){return l.Qb(0,[(n()(),l.ub(0,0,null,null,2,"mat-icon",[["class","mr-1 custom-icon course rotate-90 mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,f.b,f.a)),l.tb(1,9158656,null,0,v.b,[l.k,v.d,[8,null],[2,v.a]],null,null),(n()(),l.Ob(2,0,[""," "]))],(function(n,e){n(e,1,0)}),(function(n,e){n(e,0,0,l.Gb(e,1).inline,"primary"!==l.Gb(e,1).color&&"accent"!==l.Gb(e,1).color&&"warn"!==l.Gb(e,1).color),n(e,2,0,e.parent.parent.context.$implicit.icon)}))}function H(n){return l.Qb(0,[(n()(),l.ub(0,0,null,null,2,"mat-icon",[["class","mr-1 custom-icon program rotate-90 mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,f.b,f.a)),l.tb(1,9158656,null,0,v.b,[l.k,v.d,[8,null],[2,v.a]],null,null),(n()(),l.Ob(2,0,[""," "]))],(function(n,e){n(e,1,0)}),(function(n,e){n(e,0,0,l.Gb(e,1).inline,"primary"!==l.Gb(e,1).color&&"accent"!==l.Gb(e,1).color&&"warn"!==l.Gb(e,1).color),n(e,2,0,e.parent.parent.context.$implicit.icon)}))}function V(n){return l.Qb(0,[(n()(),l.ub(0,0,null,null,0,"img",[["class","new-img ws-mat-primary-text"]],[[8,"src",4],[8,"id",0],[8,"alt",0],[8,"title",0]],null,null,null,null))],null,(function(n,e){n(e,0,0,e.parent.parent.context.$implicit.icon,"content_"+e.parent.parent.context.$implicit.name,e.parent.parent.context.$implicit.name,e.parent.parent.context.$implicit.name)}))}function K(n){return l.Qb(0,[(n()(),l.ub(0,16777216,null,null,16,"button",[["aria-haspopup","true"],["class","type-container mat-menu-item mat-menu-trigger"],["mat-menu-item",""]],[[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0],[1,"aria-expanded",0]],[[null,"click"],[null,"mouseenter"],[null,"mousedown"],[null,"keydown"]],(function(n,e,t){var i=!0,a=n.component;return"click"===e&&(i=!1!==l.Gb(n,1)._checkDisabled(t)&&i),"mouseenter"===e&&(i=!1!==l.Gb(n,1)._handleMouseEnter()&&i),"mousedown"===e&&(i=!1!==l.Gb(n,2)._handleMousedown(t)&&i),"keydown"===e&&(i=!1!==l.Gb(n,2)._handleKeydown(t)&&i),"click"===e&&(i=!1!==l.Gb(n,2)._handleClick(t)&&i),"click"===e&&(i=!1!==a.click(a.type,n.parent.context.$implicit.id)&&i),i}),F.c,F.a)),l.tb(1,180224,[[2,4],[3,4]],0,U.f,[l.k,o.d,u.h,[2,U.b]],null,null),l.tb(2,1196032,null,0,U.h,[b.d,l.k,l.P,U.c,[2,U.d],[6,U.f],[2,m.b],u.h],{menu:[0,"menu"]},null),(n()(),l.kb(16777216,null,0,1,null,j)),l.tb(4,16384,null,0,o.p,[l.P,l.M],{ngIf:[0,"ngIf"]},null),(n()(),l.kb(16777216,null,0,1,null,q)),l.tb(6,16384,null,0,o.p,[l.P,l.M],{ngIf:[0,"ngIf"]},null),(n()(),l.kb(16777216,null,0,1,null,z)),l.tb(8,16384,null,0,o.p,[l.P,l.M],{ngIf:[0,"ngIf"]},null),(n()(),l.kb(16777216,null,0,1,null,H)),l.tb(10,16384,null,0,o.p,[l.P,l.M],{ngIf:[0,"ngIf"]},null),(n()(),l.kb(16777216,null,0,1,null,V)),l.tb(12,16384,null,0,o.p,[l.P,l.M],{ngIf:[0,"ngIf"]},null),(n()(),l.ub(13,0,null,0,1,null,null,null,null,null,null,null)),(n()(),l.Ob(14,null,["",""])),(n()(),l.ub(15,0,null,0,1,"ws-auth-collection-matmenu",[],null,[[null,"action"]],(function(n,e,t){var l=!0;return"action"===e&&(l=!1!==n.component.click(t.action,t.type)&&l),l}),tn,Q)),l.tb(16,114688,[["child",4]],0,R,[],{type:[0,"type"],childType:[1,"childType"]},{action:"action"}),(n()(),l.kb(0,null,null,0))],(function(n,e){var t=e.component;n(e,2,0,l.Gb(e,16).childMenu),n(e,4,0,"Resource"===e.parent.context.$implicit.name),n(e,6,0,"Module"===e.parent.context.$implicit.name),n(e,8,0,"Course"===e.parent.context.$implicit.name),n(e,10,0,"Program"===e.parent.context.$implicit.name),n(e,12,0,e.parent.context.$implicit.icon.length>15),n(e,16,0,t.type,e.parent.context.$implicit.children)}),(function(n,e){n(e,0,0,l.Gb(e,1).role,l.Gb(e,1)._highlighted,l.Gb(e,1)._triggersSubmenu,l.Gb(e,1)._getTabIndex(),l.Gb(e,1).disabled.toString(),l.Gb(e,1).disabled||null,l.Gb(e,2).menuOpen||null),n(e,14,0,e.parent.context.$implicit.name)}))}function J(n){return l.Qb(0,[(n()(),l.ub(0,0,null,null,2,"mat-icon",[["aria-hidden","false"],["class","node-icon ws-mat-primary-text mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,f.b,f.a)),l.tb(1,9158656,null,0,v.b,[l.k,v.d,[8,"false"],[2,v.a]],null,null),(n()(),l.Ob(2,0,["",""]))],(function(n,e){n(e,1,0)}),(function(n,e){n(e,0,0,l.Gb(e,1).inline,"primary"!==l.Gb(e,1).color&&"accent"!==l.Gb(e,1).color&&"warn"!==l.Gb(e,1).color),n(e,2,0,e.parent.parent.context.$implicit.icon)}))}function W(n){return l.Qb(0,[(n()(),l.ub(0,0,null,null,2,"mat-icon",[["class","mr-1 custom-icon resource rotate-90 mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,f.b,f.a)),l.tb(1,9158656,null,0,v.b,[l.k,v.d,[8,null],[2,v.a]],null,null),(n()(),l.Ob(2,0,[""," "]))],(function(n,e){n(e,1,0)}),(function(n,e){n(e,0,0,l.Gb(e,1).inline,"primary"!==l.Gb(e,1).color&&"accent"!==l.Gb(e,1).color&&"warn"!==l.Gb(e,1).color),n(e,2,0,e.parent.parent.context.$implicit.icon)}))}function X(n){return l.Qb(0,[(n()(),l.ub(0,0,null,null,2,"mat-icon",[["class","mr-1 custom-icon module rotate-90 mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,f.b,f.a)),l.tb(1,9158656,null,0,v.b,[l.k,v.d,[8,null],[2,v.a]],null,null),(n()(),l.Ob(2,0,[""," "]))],(function(n,e){n(e,1,0)}),(function(n,e){n(e,0,0,l.Gb(e,1).inline,"primary"!==l.Gb(e,1).color&&"accent"!==l.Gb(e,1).color&&"warn"!==l.Gb(e,1).color),n(e,2,0,e.parent.parent.context.$implicit.icon)}))}function Y(n){return l.Qb(0,[(n()(),l.ub(0,0,null,null,2,"mat-icon",[["class","mr-1 custom-icon course rotate-90 mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,f.b,f.a)),l.tb(1,9158656,null,0,v.b,[l.k,v.d,[8,null],[2,v.a]],null,null),(n()(),l.Ob(2,0,[""," "]))],(function(n,e){n(e,1,0)}),(function(n,e){n(e,0,0,l.Gb(e,1).inline,"primary"!==l.Gb(e,1).color&&"accent"!==l.Gb(e,1).color&&"warn"!==l.Gb(e,1).color),n(e,2,0,e.parent.parent.context.$implicit.icon)}))}function Z(n){return l.Qb(0,[(n()(),l.ub(0,0,null,null,2,"mat-icon",[["class","mr-1 custom-icon program rotate-90 mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,f.b,f.a)),l.tb(1,9158656,null,0,v.b,[l.k,v.d,[8,null],[2,v.a]],null,null),(n()(),l.Ob(2,0,[""," "]))],(function(n,e){n(e,1,0)}),(function(n,e){n(e,0,0,l.Gb(e,1).inline,"primary"!==l.Gb(e,1).color&&"accent"!==l.Gb(e,1).color&&"warn"!==l.Gb(e,1).color),n(e,2,0,e.parent.parent.context.$implicit.icon)}))}function nn(n){return l.Qb(0,[(n()(),l.ub(0,0,null,null,13,"button",[["class","type-container mat-menu-item"],["mat-menu-item",""]],[[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],(function(n,e,t){var i=!0,a=n.component;return"click"===e&&(i=!1!==l.Gb(n,1)._checkDisabled(t)&&i),"mouseenter"===e&&(i=!1!==l.Gb(n,1)._handleMouseEnter()&&i),"click"===e&&(i=!1!==a.click(a.type,n.parent.context.$implicit.id)&&i),i}),F.c,F.a)),l.tb(1,180224,[[2,4],[3,4]],0,U.f,[l.k,o.d,u.h,[2,U.b]],null,null),(n()(),l.kb(16777216,null,0,1,null,J)),l.tb(3,16384,null,0,o.p,[l.P,l.M],{ngIf:[0,"ngIf"]},null),(n()(),l.kb(16777216,null,0,1,null,W)),l.tb(5,16384,null,0,o.p,[l.P,l.M],{ngIf:[0,"ngIf"]},null),(n()(),l.kb(16777216,null,0,1,null,X)),l.tb(7,16384,null,0,o.p,[l.P,l.M],{ngIf:[0,"ngIf"]},null),(n()(),l.kb(16777216,null,0,1,null,Y)),l.tb(9,16384,null,0,o.p,[l.P,l.M],{ngIf:[0,"ngIf"]},null),(n()(),l.kb(16777216,null,0,1,null,Z)),l.tb(11,16384,null,0,o.p,[l.P,l.M],{ngIf:[0,"ngIf"]},null),(n()(),l.ub(12,0,null,0,1,null,null,null,null,null,null,null)),(n()(),l.Ob(13,null,["",""]))],(function(n,e){n(e,3,0,!("Resource"===e.parent.context.$implicit.name||"Module"===e.parent.context.$implicit.name||"Course"===e.parent.context.$implicit.name||"Program"===e.parent.context.$implicit.name)),n(e,5,0,"Resource"===e.parent.context.$implicit.name),n(e,7,0,"Module"===e.parent.context.$implicit.name),n(e,9,0,"Course"===e.parent.context.$implicit.name),n(e,11,0,"Program"===e.parent.context.$implicit.name)}),(function(n,e){n(e,0,0,l.Gb(e,1).role,l.Gb(e,1)._highlighted,l.Gb(e,1)._triggersSubmenu,l.Gb(e,1)._getTabIndex(),l.Gb(e,1).disabled.toString(),l.Gb(e,1).disabled||null),n(e,13,0,e.parent.context.$implicit.name)}))}function en(n){return l.Qb(0,[(n()(),l.ub(0,0,null,null,4,null,null,null,null,null,null,null)),(n()(),l.kb(16777216,null,null,1,null,K)),l.tb(2,16384,null,0,o.p,[l.P,l.M],{ngIf:[0,"ngIf"]},null),(n()(),l.kb(16777216,null,null,1,null,nn)),l.tb(4,16384,null,0,o.p,[l.P,l.M],{ngIf:[0,"ngIf"]},null),(n()(),l.kb(0,null,null,0))],(function(n,e){n(e,2,0,e.context.$implicit.children&&e.context.$implicit.children.length),n(e,4,0,!e.context.$implicit.children||!e.context.$implicit.children.length)}),null)}function tn(n){return l.Qb(0,[l.Mb(402653184,1,{childMenu:0}),(n()(),l.ub(1,0,null,null,8,"mat-menu",[],null,null,null,F.d,F.b)),l.Lb(6144,null,U.d,null,[U.i]),l.Lb(6144,null,U.b,null,[U.d]),l.tb(4,1294336,[[1,4],["childMenu",4]],3,U.i,[l.k,l.y,U.a],null,null),l.Mb(603979776,2,{_allItems:1}),l.Mb(603979776,3,{items:1}),l.Mb(603979776,4,{lazyContent:0}),(n()(),l.kb(16777216,null,0,1,null,en)),l.tb(9,278528,null,0,o.o,[l.P,l.M,l.r],{ngForOf:[0,"ngForOf"]},null)],(function(n,e){var t=e.component;n(e,4,0),n(e,9,0,t.childType)}),null)}const ln={"Learning Path":4,Course:3,Collection:2,Resource:1};var an=t("mrSG"),on=(t("g6cB"),t("z/Ba")),rn=t("jtHE"),cn=t("2Vo4"),un=t("DqIX"),sn=t("QJQv");class dn{constructor(n,e,t){this.accessService=n,this.contentService=e,this.authInitService=t,this.lazyLoad=new Set,this._uniqueId=0}get uniqueId(){return this._uniqueId+=1,Date.now()+this._uniqueId}buildTreeAndMap(n,e,t,l,i){const a=(n,o,r=!0)=>{const c={editable:r,parentId:o,id:this.uniqueId,identifier:n.identifier,category:this.getCategory(n),childLoaded:!this.lazyLoad.has(this.getCategory(n)),children:[]};e.set(n.identifier,n),l.set(c.id,n.identifier);const u=i.get(c.identifier);u?u.push(c.id):i.set(c.identifier,[c.id]);const s=this.hasAccess(n);if(c.childLoaded&&c.children){const e=[];n.children.forEach(n=>e.push(a(n,c.id,s))),c.children=e}return t.set(c.id,c),c};return a(n)}getFlatHierarchy(n,e,t=!0){const l=[],i=n=>{l.push(n);const a=e.get(n);(t&&a.editable||!t)&&(a.children||[]).map(n=>i(n.id))};return i(n),l}getCategory(n){return n.category||n.contentType}getCategoryType(n){switch(this.getCategory(n)){case"Collection":default:return""}}getIcon(n){return n.mimeType===sn.a.collection?"Learning Path"===n.contentType?un.a.program:"Course"===n.contentType?un.a.course:un.a.learningModule:n.mimeType===sn.a.html?"Certification"===n.resourceType?un.a.certificate:n.isExternal?un.a.externalContent:un.a.htmlPicker:n.mimeType===sn.a.pdf?n.artifactUrl?un.a.pdf:un.a.emptyFile:n.mimeType===sn.a.youtube?un.a.youtube:n.mimeType===sn.a.quiz?"Assessment"===n.resourceType?un.a.assessment:un.a.quiz:n.mimeType===sn.a.dragDrop?un.a.dragNDrop:n.mimeType===sn.a.htmlPicker?un.a.htmlPicker:n.mimeType===sn.a.webModule?un.a.html:n.mimeType===sn.a.handson?un.a.handsOn:n.mimeType===sn.a.iap?un.a.iap:n.mimeType===sn.a.mp3?un.a.audio:n.mimeType===sn.a.mp4?un.a.video:"Collection"===n.contentType?un.a.learningModule:un.a.default}hasAccess(n,e){return this.contentService.hasAccess(n,!1,e)&&"InReview"===n.status?this.authInitService.collectionConfig.enabledRole.includes("reviewer"):"Reviewed"===n.status?this.authInitService.collectionConfig.enabledRole.includes("publisher"):["Draft","Live"].includes(n.status)?this.authInitService.collectionConfig.enabledRole.includes("author"):this.accessService.hasRole(["admin"])}allowMaxDepth(n,e,t){return!0}}class bn{constructor(n,e,t,l,i){this.contentService=n,this.editorService=e,this.resolver=t,this.authInitService=l,this.logger=i,this.parentNode=[],this.invalidIds=[],this.onInvalidNodeChange=new rn.a,this.flatNodeMap=new Map,this.uniqueIdMap=new Map,this.lexIdMap=new Map,this.changedHierarchy={},this.treeStructureChange=new cn.a(null),this.selectedNodeChange=new cn.a(null)}get selectedNode(){return this.selectedNodeChange.value}allowDrop(n,e){let t=!0;return n.editable&&e.editable&&this.authInitService.collectionConfig.childrenConfig[e.category]&&this.resolver.hasAccess(this.contentService.getUpdatedMeta(e.identifier),e.parentId?this.contentService.getUpdatedMeta(this.flatNodeMap.get(e.parentId).identifier):void 0)?this.authInitService.collectionConfig.maxDepth<=e.level+ln[n.category]&&(t=!1):t=!1,t}dragAndDrop(n,e,t,l="below",i=!0){const a=n.parentId?this.flatNodeMap.get(n.parentId):void 0,o=this.flatNodeMap.get(e.id),r=a?a.children:[],c=o.children;r.splice(r.findIndex(e=>e.id===n.id),1);const u=this.flatNodeMap.get(n.id);if(u.parentId=e.id,t){const n=(e.children||[]).indexOf(t)+("above"===l?-1:1);o.children.splice(n,0,u)}else c?c.push(u):o.children=[u];a&&(this.changedHierarchy[a.identifier]={root:this.parentNode.includes(a.identifier),children:r.map(n=>({identifier:n.identifier,reasonAdded:"Added from Authoring Tool",childrenClassifiers:[]}))}),this.changedHierarchy[o.identifier]={root:this.parentNode.includes(o.identifier),children:c.map(n=>({identifier:n.identifier,reasonAdded:"Added from Authoring Tool",childrenClassifiers:[]}))},i&&this.treeStructureChange.next(this.treeStructureChange.value)}addChildOrSibling(n,e,t,l="below"){return an.__awaiter(this,void 0,void 0,(function*(){try{const i=yield this.editorService.readMultipleContent(n).toPromise(),a=new Map;return i.map((i,o)=>{this.contentService.setOriginalMeta(i);const r=this.resolver.buildTreeAndMap(i,a,this.flatNodeMap,this.uniqueIdMap,this.lexIdMap);this.dragAndDrop(r,e,t,l,o===n.length-1)}),!0}catch(i){return this.logger.error(i),!1}}))}createChildOrSibling(n,e,t,l="below"){return an.__awaiter(this,void 0,void 0,(function*(){try{const i=this.authInitService.creationEntity.get(n),a=Object.assign({name:"Untitled Content",description:"",mimeType:i.mimeType,contentType:i.contentType,resourceType:i.resourceType,locale:this.contentService.originalContent[this.flatNodeMap.get(this.currentParentNode).identifier].locale||"en"},i.additionalMeta||{}),o=yield this.editorService.createAndReadContent(a).toPromise();this.contentService.setOriginalMeta(o);const r=new Map,c=this.resolver.buildTreeAndMap(o,r,this.flatNodeMap,this.uniqueIdMap,this.lexIdMap);return this.dragAndDrop(c,e,t,l),!0}catch(i){return this.logger.error(i),!1}}))}deleteNode(n){const e=this.resolver.getFlatHierarchy(n,this.flatNodeMap,!1),t=this.flatNodeMap.get(n),l=t.parentId?this.flatNodeMap.get(t.parentId):void 0;if(e.forEach(n=>{this.flatNodeMap.delete(n);const e=this.uniqueIdMap.get(n);this.uniqueIdMap.delete(n);const t=this.lexIdMap.get(e);t.length>1?t.splice(t.findIndex(e=>n===e),1):(this.lexIdMap.delete(e),delete this.contentService.originalContent[e],delete this.contentService.upDatedContent[e],delete this.changedHierarchy[e])}),l){const e=l.children||[];e.splice(e.findIndex(e=>e.id===n),1),this.changedHierarchy[l.identifier]={root:this.parentNode.includes(l.identifier),children:e.map(n=>({identifier:n.identifier,reasonAdded:"Added from Authoring Tool",childrenClassifiers:[]}))}}this.treeStructureChange.next(this.treeStructureChange.value)}cascadeDown(n,e,t,l=!1){const i=this.resolver.getFlatHierarchy(n,this.flatNodeMap,!0);return!(i.length<=1||(i.filter(e=>e!==n).forEach(n=>{const i=this.uniqueIdMap.get(n);if(l){let n=this.contentService.getUpdatedMeta(i)[t];n?n.push(e):n=[e],this.contentService.setUpdatedMeta({field:n},i)}else this.contentService.setUpdatedMeta({field:e},i)}),0))}validationCheck(n){const e=new Map,t=new Set,l=this.resolver.getFlatHierarchy(n,this.flatNodeMap);return this.metaValidationCheck(l,t,e),this.hierarchyStructureCheck(l,t,e),this.onInvalidNodeChange.next(Array.from(t)),e.size?Array.from(e.values()):null}hierarchyStructureCheck(n,e,t){n.forEach(n=>{const l=this.flatNodeMap.get(n),i=this.authInitService.collectionConfig.childrenConfig[l.category],a=[],o=this.uniqueIdMap.get(n),r=this.contentService.getUpdatedMeta(o);let c=l,u=0;for(;c.parentId;)u+=1,c=this.flatNodeMap.get(c.parentId);const s=ln[l.category]+u-this.authInitService.collectionConfig.maxDepth;if(s>0&&a.push(`Breached maximum level of depth allowed. It should be ${s} level above`),i){const n=i.childTypes,e=n.map(()=>0),t=l.children||[];i.minChildren&&t.length<i.minChildren&&a.push(`Minimum ${i.minChildren} children is required. But ${t.length?t.length:"nothing"} present`),i.maxChildren&&t.length>i.maxChildren&&a.push(`Maximum ${i.minChildren} children is allowed. But ${t.length} present`),t.forEach((l,i)=>{const o=this.contentService.getUpdatedMeta(l.identifier);let r=!1;n.forEach((n,l)=>{if(this.contentService.checkConditionV2(o,n.conditions)&&(r=!0,e[l]=e[l]+1,"n"===n.position&&i!==t.length-1)){let e=!0;t.slice(i).forEach(t=>{const l=this.contentService.getUpdatedMeta(t.identifier);e=this.contentService.checkConditionV2(l,n.conditions),e||a.push((o.name||"Untitled Content")+" should be last child")})}}),r||a.push((o.name||"Untitled Content")+" is not allowed to add here")}),n.forEach((n,t)=>{n.minimum&&e[t]<n.minimum&&a.push(`Minimum ${n.minimum} contents of type ${this.formStringFromCondition(n.conditions)} is required. But only ${e[t]} is present`),n.maximum&&n.maximum<e[t]&&a.push(`Maximum ${n.maximum} contents of type ${this.formStringFromCondition(n.conditions)} is allowed. But ${e[t]} is present`)})}else l.children&&l.children.length&&a.push(`Should not contain any child. But ${l.children.length} were added`);this.populateErrorMsg(n,a,r,e,t)})}formStringFromCondition(n){let e="";return n.fit&&n.fit.forEach((n,t)=>{Object.keys(n).forEach((l,i)=>{e=`${e}${t>0?" or ":""}${i>0?" ":""}${l} in ${n[l].join(" or ")}`})}),e}metaValidationCheck(n,e,t){n.forEach(n=>{const l=[],i=this.uniqueIdMap.get(n),a=this.contentService.getUpdatedMeta(i);this.contentService.isValid(i)||l.push("Mandatory fields are missing"),"Resource"===a.category&&("application/html"!==a.mimeType||a.artifactUrl||a.body?["application/pdf","application/x-mpegURL"].includes(a.mimeType)&&!a.artifactUrl&&l.push("Upload file"):l.push('Provide URL or populate "Body" field')),this.populateErrorMsg(n,l,a,e,t)})}populateErrorMsg(n,e,t,l,i){e.length&&(l.add(n),i.has(n)?i.get(n).message=i.get(n).message.concat(e):i.set(n,{id:n,name:t.name||"Untitled Content",message:e}))}}class hn{constructor(n,e,t){this.authInitService=n,this.accessService=e,this.storeService=t,this.isInvalid=!0,this.action=new l.m,this.allowedChild=[],this.allowedSibling=[],this.canEdit=!1,this.contentEditDisabled=!1,this.metaEditDisabled=!1}ngOnInit(){this.creationContent=this.authInitService.creationEntity;const n=this.authInitService.collectionConfig.childrenConfig,e=n[this.node.category],t=this.accessService.getUpdatedMeta(this.node.identifier);if(this.contentEditDisabled=t.isContentEditingDisabled,this.metaEditDisabled=t.isMetaEditingDisabled,this.canEdit=this.accessService.hasAccess(t),e&&this.node.editable&&this.canEdit&&e.allowCreation&&(this.allowedChild=this.formChildren(e,this.node.level+1)),this.node.parentId){const e=this.storeService.flatNodeMap.get(this.node.parentId),t=this.accessService.getUpdatedMeta(e.identifier);e&&n[e.category]&&this.node.editable&&!t.isContentEditingDisabled&&this.accessService.hasAccess(t)&&n[e.category].allowCreation&&(this.allowedSibling=this.formChildren(n[e.category],this.node.level))}}formChildren(n,e){const t=Array.from(this.creationContent.values()),l=[];return t.forEach(t=>{!t.parent&&n.allowedCreationType&&n.allowedCreationType.includes(t.id)&&this.authInitService.collectionConfig.maxDepth>=e+(ln[t.contentType]||1)&&l.push(this.recursiveAddFunction(t,n.allowedCreationType,e))}),l}recursiveAddFunction(n,e,t){const l=[],i={children:l,id:n.id,name:n.name,icon:n.icon};return n.children&&n.children.forEach(n=>{const i=this.authInitService.creationEntity.get(n);i&&e.includes(i.id)&&this.authInitService.collectionConfig.maxDepth>=t+(ln[i.contentType]||1)&&l.push(this.recursiveAddFunction(i,e,t))}),i}click(n,e){"resource"!==e&&this.action.emit({action:n,type:e})}}var pn=l.sb({encapsulation:0,styles:[[".op500[_ngcontent-%COMP%]{opacity:.5}.menu-icon[_ngcontent-%COMP%]{position:relative;top:2px;font-size:20px}"]],data:{}});function mn(n){return l.Qb(0,[(n()(),l.ub(0,16777216,null,null,7,"button",[["aria-haspopup","true"],["class","mat-menu-item mat-menu-trigger"],["mat-menu-item",""]],[[2,"op500",null],[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0],[1,"aria-expanded",0]],[[null,"click"],[null,"mouseenter"],[null,"mousedown"],[null,"keydown"]],(function(n,e,t){var i=!0;return"click"===e&&(i=!1!==l.Gb(n,1)._checkDisabled(t)&&i),"mouseenter"===e&&(i=!1!==l.Gb(n,1)._handleMouseEnter()&&i),"mousedown"===e&&(i=!1!==l.Gb(n,2)._handleMousedown(t)&&i),"keydown"===e&&(i=!1!==l.Gb(n,2)._handleKeydown(t)&&i),"click"===e&&(i=!1!==l.Gb(n,2)._handleClick(t)&&i),i}),F.c,F.a)),l.tb(1,180224,[[1,4],[2,4]],0,U.f,[l.k,o.d,u.h,[2,U.b]],{disabled:[0,"disabled"]},null),l.tb(2,1196032,null,0,U.h,[b.d,l.k,l.P,U.c,[2,U.d],[6,U.f],[2,m.b],u.h],{menu:[0,"menu"]},null),(n()(),l.ub(3,0,null,0,2,"mat-icon",[["aria-hidden","false"],["aria-label","Edit content"],["class","node-icon ws-mat-primary-text mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,f.b,f.a)),l.tb(4,9158656,null,0,v.b,[l.k,v.d,[8,"false"],[2,v.a]],null,null),(n()(),l.Ob(-1,0,["edit "])),(n()(),l.ub(6,0,null,0,1,null,null,null,null,null,null,null)),(n()(),l.Ob(-1,null,["Edit"])),(n()(),l.kb(0,null,null,0))],(function(n,e){var t=e.component;n(e,1,0,!t.canEdit||t.metaEditDisabled&&t.contentEditDisabled),n(e,2,0,l.Gb(e.parent,45)),n(e,4,0)}),(function(n,e){n(e,0,0,!e.component.canEdit,l.Gb(e,1).role,l.Gb(e,1)._highlighted,l.Gb(e,1)._triggersSubmenu,l.Gb(e,1)._getTabIndex(),l.Gb(e,1).disabled.toString(),l.Gb(e,1).disabled||null,l.Gb(e,2).menuOpen||null),n(e,3,0,l.Gb(e,4).inline,"primary"!==l.Gb(e,4).color&&"accent"!==l.Gb(e,4).color&&"warn"!==l.Gb(e,4).color)}))}function gn(n){return l.Qb(0,[(n()(),l.ub(0,0,null,null,6,"button",[["class","mat-menu-item"],["mat-menu-item",""]],[[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],(function(n,e,t){var i=!0,a=n.component;return"click"===e&&(i=!1!==l.Gb(n,1)._checkDisabled(t)&&i),"mouseenter"===e&&(i=!1!==l.Gb(n,1)._handleMouseEnter()&&i),"click"===e&&(i=!1!==a.click("preview")&&i),i}),F.c,F.a)),l.tb(1,180224,[[1,4],[2,4]],0,U.f,[l.k,o.d,u.h,[2,U.b]],null,null),(n()(),l.ub(2,0,null,0,2,"mat-icon",[["aria-hidden","false"],["aria-label","Preview"],["class","node-icon ws-mat-primary-text mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,f.b,f.a)),l.tb(3,9158656,null,0,v.b,[l.k,v.d,[8,"false"],[2,v.a]],null,null),(n()(),l.Ob(-1,0,[" remove_red_eye"])),(n()(),l.ub(5,0,null,0,1,null,null,null,null,null,null,null)),(n()(),l.Ob(-1,null,["Preview"]))],(function(n,e){n(e,3,0)}),(function(n,e){n(e,0,0,l.Gb(e,1).role,l.Gb(e,1)._highlighted,l.Gb(e,1)._triggersSubmenu,l.Gb(e,1)._getTabIndex(),l.Gb(e,1).disabled.toString(),l.Gb(e,1).disabled||null),n(e,2,0,l.Gb(e,3).inline,"primary"!==l.Gb(e,3).color&&"accent"!==l.Gb(e,3).color&&"warn"!==l.Gb(e,3).color)}))}function fn(n){return l.Qb(0,[(n()(),l.ub(0,0,null,null,6,"button",[["class","mat-menu-item"],["mat-menu-item",""]],[[2,"op500",null],[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],(function(n,e,t){var i=!0,a=n.component;return"click"===e&&(i=!1!==l.Gb(n,1)._checkDisabled(t)&&i),"mouseenter"===e&&(i=!1!==l.Gb(n,1)._handleMouseEnter()&&i),"click"===e&&(i=!1!==a.click("addChild")&&i),i}),F.c,F.a)),l.tb(1,180224,[[1,4],[2,4]],0,U.f,[l.k,o.d,u.h,[2,U.b]],{disabled:[0,"disabled"]},null),(n()(),l.ub(2,0,null,0,2,"mat-icon",[["aria-hidden","false"],["aria-label","Add a Child"],["class","node-icon ws-mat-primary-text mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,f.b,f.a)),l.tb(3,9158656,null,0,v.b,[l.k,v.d,[8,"false"],[2,v.a]],null,null),(n()(),l.Ob(-1,0,[" library_add"])),(n()(),l.ub(5,0,null,0,1,null,null,null,null,null,null,null)),(n()(),l.Ob(-1,null,["Add a Child"]))],(function(n,e){var t=e.component;n(e,1,0,!t.canEdit||t.contentEditDisabled),n(e,3,0)}),(function(n,e){var t=e.component;n(e,0,0,!t.canEdit||t.contentEditDisabled,l.Gb(e,1).role,l.Gb(e,1)._highlighted,l.Gb(e,1)._triggersSubmenu,l.Gb(e,1)._getTabIndex(),l.Gb(e,1).disabled.toString(),l.Gb(e,1).disabled||null),n(e,2,0,l.Gb(e,3).inline,"primary"!==l.Gb(e,3).color&&"accent"!==l.Gb(e,3).color&&"warn"!==l.Gb(e,3).color)}))}function vn(n){return l.Qb(0,[(n()(),l.ub(0,16777216,null,null,3,"mat-icon",[["aria-haspopup","true"],["aria-hidden","false"],["aria-label","Menu for content"],["class","menu-icon ws-mat-primary-text mat-icon notranslate mat-menu-trigger"],["role","img"]],[[2,"ws-mat-warn-text",null],[2,"ws-mat-primary-text",null],[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null],[1,"aria-expanded",0]],[[null,"click"],[null,"mousedown"],[null,"keydown"]],(function(n,e,t){var i=!0;return"mousedown"===e&&(i=!1!==l.Gb(n,2)._handleMousedown(t)&&i),"keydown"===e&&(i=!1!==l.Gb(n,2)._handleKeydown(t)&&i),"click"===e&&(i=!1!==l.Gb(n,2)._handleClick(t)&&i),"click"===e&&(i=!1!==t.stopPropagation()&&i),i}),f.b,f.a)),l.tb(1,9158656,null,0,v.b,[l.k,v.d,[8,"false"],[2,v.a]],null,null),l.tb(2,1196032,null,0,U.h,[b.d,l.k,l.P,U.c,[2,U.d],[8,null],[2,m.b],u.h],{menu:[0,"menu"]},null),(n()(),l.Ob(-1,0,["more_vert"])),(n()(),l.ub(4,0,null,null,39,"mat-menu",[],null,null,null,F.d,F.b)),l.Lb(6144,null,U.d,null,[U.i]),l.Lb(6144,null,U.b,null,[U.d]),l.tb(7,1294336,[["menu",4]],3,U.i,[l.k,l.y,U.a],null,null),l.Mb(603979776,1,{_allItems:1}),l.Mb(603979776,2,{items:1}),l.Mb(603979776,3,{lazyContent:0}),(n()(),l.kb(16777216,null,0,1,null,mn)),l.tb(12,16384,null,0,o.p,[l.P,l.M],{ngIf:[0,"ngIf"]},null),(n()(),l.kb(16777216,null,0,1,null,gn)),l.tb(14,16384,null,0,o.p,[l.P,l.M],{ngIf:[0,"ngIf"]},null),(n()(),l.ub(15,0,null,0,6,"button",[["class","mat-menu-item"],["mat-menu-item",""]],[[2,"op500",null],[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],(function(n,e,t){var i=!0,a=n.component;return"click"===e&&(i=!1!==l.Gb(n,16)._checkDisabled(t)&&i),"mouseenter"===e&&(i=!1!==l.Gb(n,16)._handleMouseEnter()&&i),"click"===e&&(i=!1!==a.click("delete")&&i),i}),F.c,F.a)),l.tb(16,180224,[[1,4],[2,4]],0,U.f,[l.k,o.d,u.h,[2,U.b]],{disabled:[0,"disabled"]},null),(n()(),l.ub(17,0,null,0,2,"mat-icon",[["aria-hidden","false"],["aria-label","Delete content"],["class","node-icon ws-mat-primary-text mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,f.b,f.a)),l.tb(18,9158656,null,0,v.b,[l.k,v.d,[8,"false"],[2,v.a]],null,null),(n()(),l.Ob(-1,0,[" delete"])),(n()(),l.ub(20,0,null,0,1,null,null,null,null,null,null,null)),(n()(),l.Ob(-1,null,["Delete"])),(n()(),l.ub(22,16777216,null,0,9,"button",[["aria-haspopup","true"],["class","mat-menu-item mat-menu-trigger"],["mat-menu-item",""]],[[2,"op500",null],[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0],[1,"aria-expanded",0]],[[null,"click"],[null,"mouseenter"],[null,"mousedown"],[null,"keydown"]],(function(n,e,t){var i=!0;return"click"===e&&(i=!1!==l.Gb(n,23)._checkDisabled(t)&&i),"mouseenter"===e&&(i=!1!==l.Gb(n,23)._handleMouseEnter()&&i),"mousedown"===e&&(i=!1!==l.Gb(n,24)._handleMousedown(t)&&i),"keydown"===e&&(i=!1!==l.Gb(n,24)._handleKeydown(t)&&i),"click"===e&&(i=!1!==l.Gb(n,24)._handleClick(t)&&i),i}),F.c,F.a)),l.tb(23,180224,[[1,4],[2,4]],0,U.f,[l.k,o.d,u.h,[2,U.b]],{disabled:[0,"disabled"]},null),l.tb(24,1196032,null,0,U.h,[b.d,l.k,l.P,U.c,[2,U.d],[6,U.f],[2,m.b],u.h],{menu:[0,"menu"]},null),(n()(),l.ub(25,0,null,0,2,"mat-icon",[["aria-hidden","false"],["aria-label","Create New Sibling"],["class","node-icon ws-mat-primary-text mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,f.b,f.a)),l.tb(26,9158656,null,0,v.b,[l.k,v.d,[8,"false"],[2,v.a]],null,null),(n()(),l.Ob(-1,0,[" next_week"])),(n()(),l.ub(28,0,null,0,1,null,null,null,null,null,null,null)),(n()(),l.Ob(-1,null,["Create New Sibling"])),(n()(),l.ub(30,0,null,0,1,"ws-auth-collection-matmenu",[],null,[[null,"action"]],(function(n,e,t){var l=!0;return"action"===e&&(l=!1!==n.component.click(t.action,t.type)&&l),l}),tn,Q)),l.tb(31,114688,[["sibling",4]],0,R,[],{type:[0,"type"],childType:[1,"childType"]},{action:"action"}),(n()(),l.ub(32,16777216,null,0,9,"button",[["aria-haspopup","true"],["class","mat-menu-item mat-menu-trigger"],["mat-menu-item",""]],[[2,"op500",null],[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0],[1,"aria-expanded",0]],[[null,"click"],[null,"mouseenter"],[null,"mousedown"],[null,"keydown"]],(function(n,e,t){var i=!0;return"click"===e&&(i=!1!==l.Gb(n,33)._checkDisabled(t)&&i),"mouseenter"===e&&(i=!1!==l.Gb(n,33)._handleMouseEnter()&&i),"mousedown"===e&&(i=!1!==l.Gb(n,34)._handleMousedown(t)&&i),"keydown"===e&&(i=!1!==l.Gb(n,34)._handleKeydown(t)&&i),"click"===e&&(i=!1!==l.Gb(n,34)._handleClick(t)&&i),i}),F.c,F.a)),l.tb(33,180224,[[1,4],[2,4]],0,U.f,[l.k,o.d,u.h,[2,U.b]],{disabled:[0,"disabled"]},null),l.tb(34,1196032,null,0,U.h,[b.d,l.k,l.P,U.c,[2,U.d],[6,U.f],[2,m.b],u.h],{menu:[0,"menu"]},null),(n()(),l.ub(35,0,null,0,2,"mat-icon",[["aria-hidden","false"],["aria-label","Create New Child"],["class","node-icon ws-mat-primary-text mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,f.b,f.a)),l.tb(36,9158656,null,0,v.b,[l.k,v.d,[8,"false"],[2,v.a]],null,null),(n()(),l.Ob(-1,0,[" create_new_folder"])),(n()(),l.ub(38,0,null,0,1,null,null,null,null,null,null,null)),(n()(),l.Ob(-1,null,["Create New Child"])),(n()(),l.ub(40,0,null,0,1,"ws-auth-collection-matmenu",[],null,[[null,"action"]],(function(n,e,t){var l=!0;return"action"===e&&(l=!1!==n.component.click(t.action,t.type)&&l),l}),tn,Q)),l.tb(41,114688,[["child",4]],0,R,[],{type:[0,"type"],childType:[1,"childType"]},{action:"action"}),(n()(),l.kb(16777216,null,0,1,null,fn)),l.tb(43,16384,null,0,o.p,[l.P,l.M],{ngIf:[0,"ngIf"]},null),(n()(),l.ub(44,0,null,null,20,"mat-menu",[],null,null,null,F.d,F.b)),l.tb(45,1294336,[["edit",4]],3,U.i,[l.k,l.y,U.a],null,null),l.Mb(603979776,4,{_allItems:1}),l.Mb(603979776,5,{items:1}),l.Mb(603979776,6,{lazyContent:0}),l.Lb(2048,null,U.d,null,[U.i]),l.Lb(2048,null,U.b,null,[U.d]),(n()(),l.ub(51,0,null,0,6,"button",[["class","mat-menu-item"],["mat-menu-item",""]],[[2,"op500",null],[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],(function(n,e,t){var i=!0,a=n.component;return"click"===e&&(i=!1!==l.Gb(n,52)._checkDisabled(t)&&i),"mouseenter"===e&&(i=!1!==l.Gb(n,52)._handleMouseEnter()&&i),"click"===e&&(i=!1!==a.click("editContent")&&i),i}),F.c,F.a)),l.tb(52,180224,[[4,4],[5,4]],0,U.f,[l.k,o.d,u.h,[2,U.b]],{disabled:[0,"disabled"]},null),(n()(),l.ub(53,0,null,0,2,"mat-icon",[["aria-hidden","false"],["aria-label","Edit content"],["class","node-icon ws-mat-primary-text mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,f.b,f.a)),l.tb(54,9158656,null,0,v.b,[l.k,v.d,[8,"false"],[2,v.a]],null,null),(n()(),l.Ob(-1,0,["build "])),(n()(),l.ub(56,0,null,0,1,null,null,null,null,null,null,null)),(n()(),l.Ob(-1,null,["Edit Content"])),(n()(),l.ub(58,0,null,0,6,"button",[["class","mat-menu-item"],["mat-menu-item",""]],[[2,"op500",null],[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],(function(n,e,t){var i=!0,a=n.component;return"click"===e&&(i=!1!==l.Gb(n,59)._checkDisabled(t)&&i),"mouseenter"===e&&(i=!1!==l.Gb(n,59)._handleMouseEnter()&&i),"click"===e&&(i=!1!==a.click("editMeta")&&i),i}),F.c,F.a)),l.tb(59,180224,[[4,4],[5,4]],0,U.f,[l.k,o.d,u.h,[2,U.b]],{disabled:[0,"disabled"]},null),(n()(),l.ub(60,0,null,0,2,"mat-icon",[["aria-hidden","false"],["aria-label","Edit content"],["class","node-icon ws-mat-primary-text mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,f.b,f.a)),l.tb(61,9158656,null,0,v.b,[l.k,v.d,[8,"false"],[2,v.a]],null,null),(n()(),l.Ob(-1,0,["ballot "])),(n()(),l.ub(63,0,null,0,1,null,null,null,null,null,null,null)),(n()(),l.Ob(-1,null,["Edit Meta"]))],(function(n,e){var t=e.component;n(e,1,0),n(e,2,0,l.Gb(e,7)),n(e,7,0),n(e,12,0,"Resource"===t.node.category),n(e,14,0,"Resource"===t.node.category),n(e,16,0,!t.node.parentId&&t.node.editable),n(e,18,0),n(e,23,0,!t.node.parentId||!t.allowedSibling.length),n(e,24,0,l.Gb(e,31).childMenu),n(e,26,0),n(e,31,0,"createSibling",t.allowedSibling),n(e,33,0,!t.allowedChild.length),n(e,34,0,l.Gb(e,41).childMenu),n(e,36,0),n(e,41,0,"createChild",t.allowedChild),n(e,43,0,"Resource"!==t.node.category),n(e,45,0),n(e,52,0,t.contentEditDisabled),n(e,54,0),n(e,59,0,t.metaEditDisabled),n(e,61,0)}),(function(n,e){var t=e.component;n(e,0,0,t.isInvalid,!t.isInvalid,l.Gb(e,1).inline,"primary"!==l.Gb(e,1).color&&"accent"!==l.Gb(e,1).color&&"warn"!==l.Gb(e,1).color,l.Gb(e,2).menuOpen||null),n(e,15,0,!t.node.parentId&&t.node.editable,l.Gb(e,16).role,l.Gb(e,16)._highlighted,l.Gb(e,16)._triggersSubmenu,l.Gb(e,16)._getTabIndex(),l.Gb(e,16).disabled.toString(),l.Gb(e,16).disabled||null),n(e,17,0,l.Gb(e,18).inline,"primary"!==l.Gb(e,18).color&&"accent"!==l.Gb(e,18).color&&"warn"!==l.Gb(e,18).color),n(e,22,0,!t.node.parentId||!t.allowedSibling.length,l.Gb(e,23).role,l.Gb(e,23)._highlighted,l.Gb(e,23)._triggersSubmenu,l.Gb(e,23)._getTabIndex(),l.Gb(e,23).disabled.toString(),l.Gb(e,23).disabled||null,l.Gb(e,24).menuOpen||null),n(e,25,0,l.Gb(e,26).inline,"primary"!==l.Gb(e,26).color&&"accent"!==l.Gb(e,26).color&&"warn"!==l.Gb(e,26).color),n(e,32,0,!t.allowedChild.length,l.Gb(e,33).role,l.Gb(e,33)._highlighted,l.Gb(e,33)._triggersSubmenu,l.Gb(e,33)._getTabIndex(),l.Gb(e,33).disabled.toString(),l.Gb(e,33).disabled||null,l.Gb(e,34).menuOpen||null),n(e,35,0,l.Gb(e,36).inline,"primary"!==l.Gb(e,36).color&&"accent"!==l.Gb(e,36).color&&"warn"!==l.Gb(e,36).color),n(e,51,0,t.contentEditDisabled,l.Gb(e,52).role,l.Gb(e,52)._highlighted,l.Gb(e,52)._triggersSubmenu,l.Gb(e,52)._getTabIndex(),l.Gb(e,52).disabled.toString(),l.Gb(e,52).disabled||null),n(e,53,0,l.Gb(e,54).inline,"primary"!==l.Gb(e,54).color&&"accent"!==l.Gb(e,54).color&&"warn"!==l.Gb(e,54).color),n(e,58,0,t.metaEditDisabled,l.Gb(e,59).role,l.Gb(e,59)._highlighted,l.Gb(e,59)._triggersSubmenu,l.Gb(e,59)._getTabIndex(),l.Gb(e,59).disabled.toString(),l.Gb(e,59).disabled||null),n(e,60,0,l.Gb(e,61).inline,"primary"!==l.Gb(e,61).color&&"accent"!==l.Gb(e,61).color&&"warn"!==l.Gb(e,61).color)}))}class Cn{constructor(n){this.storeService=n,this.isDragging=!1,this.isInvalid=!1,this.name="",this.icon="",this.resourceTyp="Resource"}ngOnInit(){this.storeService.onContentChange.subscribe(n=>{n===this.identifier&&this.getUpdatedContent()}),this.getUpdatedContent()}getUpdatedContent(){const n=this.storeService.getUpdatedMeta(this.identifier);this.resourceTyp=n.category,this.name=n.name,this.icon="call_to_action"}}var kn=l.sb({encapsulation:0,styles:[[".node-name[_ngcontent-%COMP%]{position:relative;top:2px;max-width:185px;min-width:145px;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical}.node-icon[_ngcontent-%COMP%]{padding-left:5px;padding-right:10px;top:1px;position:relative}div[_ngcontent-%COMP%]{display:flex}.type-container[_ngcontent-%COMP%]{letter-spacing:0;display:flex;align-items:center}.type-container[_ngcontent-%COMP%]   .rotate-90[_ngcontent-%COMP%]{transform:rotate(-90deg)}.type-container[_ngcontent-%COMP%]   .custom-icon[_ngcontent-%COMP%]{width:18px;height:18px;font-size:18px;margin-right:8px}.type-container[_ngcontent-%COMP%]   .resource[_ngcontent-%COMP%]{color:#00a9f4}.type-container[_ngcontent-%COMP%]   .module[_ngcontent-%COMP%]{color:#34d6a4}.type-container[_ngcontent-%COMP%]   .course[_ngcontent-%COMP%]{color:#f58634}.type-container[_ngcontent-%COMP%]   .program[_ngcontent-%COMP%]{color:#003f5c}"]],data:{}});function wn(n){return l.Qb(0,[(n()(),l.ub(0,0,null,null,2,"mat-icon",[["aria-hidden","false"],["aria-label","icon"],["class","mr-1 custom-icon resource rotate-90 mat-icon notranslate"],["role","img"]],[[2,"ws-mat-warn-text",null],[2,"ws-mat-default-text",null],[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,f.b,f.a)),l.tb(1,9158656,null,0,v.b,[l.k,v.d,[8,"false"],[2,v.a]],null,null),(n()(),l.Ob(2,0,[" "," "]))],(function(n,e){n(e,1,0)}),(function(n,e){var t=e.component;n(e,0,0,t.isInvalid,!t.isInvalid,l.Gb(e,1).inline,"primary"!==l.Gb(e,1).color&&"accent"!==l.Gb(e,1).color&&"warn"!==l.Gb(e,1).color),n(e,2,0,t.icon)}))}function xn(n){return l.Qb(0,[(n()(),l.ub(0,0,null,null,2,"mat-icon",[["aria-hidden","false"],["aria-label","icon"],["class","mr-1 custom-icon module rotate-90 mat-icon notranslate"],["role","img"]],[[2,"ws-mat-warn-text",null],[2,"ws-mat-default-text",null],[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,f.b,f.a)),l.tb(1,9158656,null,0,v.b,[l.k,v.d,[8,"false"],[2,v.a]],null,null),(n()(),l.Ob(2,0,[""," "]))],(function(n,e){n(e,1,0)}),(function(n,e){var t=e.component;n(e,0,0,t.isInvalid,!t.isInvalid,l.Gb(e,1).inline,"primary"!==l.Gb(e,1).color&&"accent"!==l.Gb(e,1).color&&"warn"!==l.Gb(e,1).color),n(e,2,0,t.icon)}))}function Sn(n){return l.Qb(0,[(n()(),l.ub(0,0,null,null,2,"mat-icon",[["aria-hidden","false"],["aria-label","icon"],["class","mr-1 custom-icon course rotate-90 mat-icon notranslate"],["role","img"]],[[2,"ws-mat-warn-text",null],[2,"ws-mat-default-text",null],[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,f.b,f.a)),l.tb(1,9158656,null,0,v.b,[l.k,v.d,[8,"false"],[2,v.a]],null,null),(n()(),l.Ob(2,0,[""," "]))],(function(n,e){n(e,1,0)}),(function(n,e){var t=e.component;n(e,0,0,t.isInvalid,!t.isInvalid,l.Gb(e,1).inline,"primary"!==l.Gb(e,1).color&&"accent"!==l.Gb(e,1).color&&"warn"!==l.Gb(e,1).color),n(e,2,0,t.icon)}))}function yn(n){return l.Qb(0,[(n()(),l.ub(0,0,null,null,2,"mat-icon",[["aria-hidden","false"],["aria-label","icon"],["class","mr-1 custom-icon program rotate-90 mat-icon notranslate"],["role","img"]],[[2,"ws-mat-warn-text",null],[2,"ws-mat-default-text",null],[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,f.b,f.a)),l.tb(1,9158656,null,0,v.b,[l.k,v.d,[8,"false"],[2,v.a]],null,null),(n()(),l.Ob(2,0,[""," "]))],(function(n,e){n(e,1,0)}),(function(n,e){var t=e.component;n(e,0,0,t.isInvalid,!t.isInvalid,l.Gb(e,1).inline,"primary"!==l.Gb(e,1).color&&"accent"!==l.Gb(e,1).color&&"warn"!==l.Gb(e,1).color),n(e,2,0,t.icon)}))}function Mn(n){return l.Qb(0,[(n()(),l.ub(0,0,null,null,1,null,null,null,null,null,null,null)),(n()(),l.Ob(1,null,["",""]))],null,(function(n,e){var t=e.component;n(e,1,0,t.name.length>25?t.name.slice(0,22)+"...":t.name)}))}function Gn(n){return l.Qb(0,[(n()(),l.ub(0,0,null,null,1,null,null,null,null,null,null,null)),(n()(),l.Ob(-1,null,["Untitled Content"]))],null,null)}function In(n){return l.Qb(0,[(n()(),l.ub(0,0,null,null,13,"div",[["class","type-container"]],null,null,null,null,null)),(n()(),l.kb(16777216,null,null,1,null,wn)),l.tb(2,16384,null,0,o.p,[l.P,l.M],{ngIf:[0,"ngIf"]},null),(n()(),l.kb(16777216,null,null,1,null,xn)),l.tb(4,16384,null,0,o.p,[l.P,l.M],{ngIf:[0,"ngIf"]},null),(n()(),l.kb(16777216,null,null,1,null,Sn)),l.tb(6,16384,null,0,o.p,[l.P,l.M],{ngIf:[0,"ngIf"]},null),(n()(),l.kb(16777216,null,null,1,null,yn)),l.tb(8,16384,null,0,o.p,[l.P,l.M],{ngIf:[0,"ngIf"]},null),(n()(),l.ub(9,0,null,null,4,"span",[["class","node-name"]],null,null,null,null,null)),(n()(),l.kb(16777216,null,null,1,null,Mn)),l.tb(11,16384,null,0,o.p,[l.P,l.M],{ngIf:[0,"ngIf"]},null),(n()(),l.kb(16777216,null,null,1,null,Gn)),l.tb(13,16384,null,0,o.p,[l.P,l.M],{ngIf:[0,"ngIf"]},null)],(function(n,e){var t=e.component;n(e,2,0,"Resource"===t.resourceTyp),n(e,4,0,"Collection"===t.resourceTyp),n(e,6,0,"Course"===t.resourceTyp),n(e,8,0,"Learning Path"===t.resourceTyp),n(e,11,0,t.name),n(e,13,0,!t.name)}),null)}var En=t("Mc5n"),_n=t("lzlj"),Pn=t("igqZ"),On=t("OBjS"),Dn=t("E+8r"),Nn=t("B3D2"),Tn=t("wHl+"),An=t("VDOG"),Ln=t("vJyk"),$n=t("7QIX"),Bn=t("lJxs");class Fn{constructor(n,e,t,i,a,o,r){this.dialog=n,this.snackBar=e,this.store=t,this.editorStore=i,this.loaderService=a,this.authInitService=o,this.breakpointObserver=r,this.action=new l.m,this.closeEvent=new l.m,this.isDragging=!1,this.dropContainer=null,this.dragContainer=null,this.expandDelay=500,this.isDropDisabled=!1,this.draggingPosition=null,this.selectedNode=null,this.expandedNodes=new Set,this.drawer=!0,this.menubtn=!0,this.parentHierarchy=[],this.backUpInformation={isDragging:!1,dropContainer:null,dragContainer:null,draggingPosition:null},this.invalidIds=[],this.mediumScreen=!1,this.mediumSizeBreakpoint$=this.breakpointObserver.observe([$n.b.XSmall,$n.b.Small]).pipe(Object(Bn.a)(n=>n.matches)),this.leftarrow=!0,this._transformer=(n,e)=>({level:e,id:n.id,identifier:n.identifier,category:n.category,expandable:!!n.children&&n.children.length>0,children:n.children?n.children.map(n=>n.id):[],editable:n.editable,childLoaded:n.childLoaded,parentId:n.parentId})}ngOnInit(){this.parentNodeId=this.store.currentParentNode,this.treeControl=new $.j(n=>n.level,n=>n.expandable),this.treeFlattener=new B.d(this._transformer,n=>n.level,n=>n.expandable,n=>n.children),this.store.onInvalidNodeChange.subscribe(n=>{this.invalidIds=n,this.expandNodesById(n)}),this.dataSource=new B.c(this.treeControl,this.treeFlattener),this.store.treeStructureChange.subscribe(n=>{this.dataSource.data=[n],this.parentNodeId===this.store.currentParentNode?(this.expandNodesById(),this.selectedNode&&!this.store.flatNodeMap.get(this.selectedNode)&&this.parentHierarchy.forEach(n=>{if(this.store.flatNodeMap.get(n)){const e=this.store.uniqueIdMap.get(n);return this.selectedNode=n,this.editorStore.currentContent=e,this.store.currentSelectedNode=n,void this.editorStore.changeActiveCont.next(e)}})):this.parentNodeId=this.store.currentParentNode}),this.store.selectedNodeChange.subscribe(n=>{n&&(this.selectedNode=n)}),this.mediumSizeBreakpoint$.subscribe(n=>{this.mediumScreen=n,n?(this.drawer=!0,this.leftarrow=!1,this.menubtn=!1):(this.leftarrow=!0,this.menubtn=!0)})}ngOnDestroy(){this.loaderService.changeLoad.next(!1)}onNodeSelect(n){n.id!==this.selectedNode&&(this.selectedNode=n.id,this.editorStore.currentContent=n.identifier,this.store.currentSelectedNode=n.id,this.editorStore.changeActiveCont.next(n.identifier))}closeSidenav(){this.closeEvent.emit(!0)}dragStart(n){this.isDragging=!0,this.dragContainer=n}dragEnd(){this.backUpInformation={isDragging:this.isDragging,dropContainer:this.dropContainer,dragContainer:this.dragContainer,draggingPosition:this.draggingPosition},this.isDragging=!1,this.dropContainer=null,this.dragContainer=null,this.draggingPosition=null}dragHover(n,e){if(e.preventDefault(),this.isDragging){this.dropContainer=n,clearTimeout(this.expandTimeout),this.expandTimeout=setTimeout(()=>{this.treeControl.expand(n)},this.expandDelay);const t=e.offsetY/e.target.clientHeight;t>=0&&t<.2?this.draggingPosition="above":t>.8?this.draggingPosition="below":t>=.2&&t<=.8&&(this.draggingPosition="center");const l=[];let i=n;for(;i;)i&&i.parentId&&l.push(i.parentId),i=this.getParentNode(i);if(l.includes(this.dragContainer.id))this.isDropDisabled=!0;else if(this.dragContainer===this.dropContainer)this.isDropDisabled=!0;else if(["above","below"].includes(this.draggingPosition)){const e=this.getParentNode(n);this.isDropDisabled=!e||!this.store.allowDrop(this.dragContainer,e)}else this.isDropDisabled=!this.store.allowDrop(this.dragContainer,this.dropContainer)}}dragHoverEnd(n){n.preventDefault(),this.isDragging&&(clearTimeout(this.expandTimeout),this.backUpInformation.dropContainer=this.dropContainer,this.dropContainer=null)}drop(){if(this.isDragging=!1,!this.isDropDisabled){this.preserveExpandedNodes();const n=["above","below"].includes(this.backUpInformation.draggingPosition),e=n?this.getParentNode(this.backUpInformation.dropContainer):this.backUpInformation.dropContainer;e.id!==this.backUpInformation.dragContainer.id&&this.store.dragAndDrop(this.backUpInformation.dragContainer,e,n?this.backUpInformation.dropContainer.id:void 0,this.backUpInformation.draggingPosition)}}preserveExpandedNodes(){this.expandedNodes=new Set,this.treeControl.dataNodes.forEach(n=>{this.treeControl.isExpandable(n)&&this.treeControl.isExpanded(n)&&this.expandedNodes.add(n.id)})}expandNodesById(n){const e=n?new Set(n):this.expandedNodes;this.treeControl.dataNodes.forEach(n=>{if(e.has(n.id)){this.treeControl.expand(n);let e=this.getParentNode(n);for(;e;)this.treeControl.expand(e),e=this.getParentNode(e)}})}getParentNode(n){const e=n.level;if(e<1)return null;for(let t=this.treeControl.dataNodes.indexOf(n)-1;t>=0;t-=1){const n=this.treeControl.dataNodes[t];if(n.level<e)return n}return null}delete(n){const e=this.dialog.open(Tn.a,{width:"500px",height:"175px",data:"deleteTreeNode"});this.preserveExpandedNodes(),e.afterClosed().subscribe(e=>{if(e){this.parentHierarchy=[];let e=n;for(;e;)e&&e.parentId&&this.parentHierarchy.push(e.parentId),e=this.getParentNode(e);this.store.deleteNode(n.id),this.snackBar.openFromComponent(An.a,{data:{type:Nn.a.SUCCESS},duration:1e3*Dn.b})}})}addChildOrSibling(n,e=!1){return an.__awaiter(this,void 0,void 0,(function*(){const t=(n.children||[]).map(n=>this.store.uniqueIdMap.get(n)),l=this.dialog.open(Ln.a,{width:"90vw",height:"90vh",data:{filter:this.authInitService.collectionConfig.childrenConfig[n.category].searchFilter,selectedIds:t}});this.preserveExpandedNodes(),l.afterClosed().subscribe(t=>an.__awaiter(this,void 0,void 0,(function*(){if(t&&t.length){const l=e?this.getParentNode(n):n;this.expandedNodes.add(l.id),this.loaderService.changeLoad.next(!0);const i=yield this.store.addChildOrSibling(t,l,e?n.id:void 0,"below");this.loaderService.changeLoad.next(!1),this.snackBar.openFromComponent(An.a,{data:{type:i?Nn.a.SUCCESS:Nn.a.FAIL},duration:1e3*Dn.b})}})))}))}createNewChildOrSibling(n,e,t=!1){return an.__awaiter(this,void 0,void 0,(function*(){const l=t?this.getParentNode(e):e;this.loaderService.changeLoad.next(!0),this.preserveExpandedNodes(),this.expandedNodes.add(l.id);const i=yield this.store.createChildOrSibling(n,l,t?e.id:void 0,"below");this.snackBar.openFromComponent(An.a,{data:{type:i?Nn.a.SUCCESS:Nn.a.FAIL},duration:1e3*Dn.b}),this.loaderService.changeLoad.next(!1)}))}takeAction(n,e,t){switch(n){case"editMeta":case"editContent":case"preview":this.onNodeSelect(e),this.action.emit({type:n,identifier:e.identifier});break;case"delete":this.delete(e);break;case"addChild":this.addChildOrSibling(e);break;case"addSibling":this.addChildOrSibling(e,!0);break;case"createChild":this.createNewChildOrSibling(t,e);break;case"createSibling":this.createNewChildOrSibling(t,e,!0)}}}var Un=l.sb({encapsulation:0,styles:[[".custom-card[_ngcontent-%COMP%]{height:60px;line-height:50px}.node-name[_ngcontent-%COMP%]{max-width:185px;min-width:145px;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical}.node-name[_ngcontent-%COMP%] + .placeholder[_ngcontent-%COMP%]{margin-top:19px}.placeholder[_ngcontent-%COMP%]{z-index:2;margin-top:-24px;position:absolute}.placeholder.second[_ngcontent-%COMP%]{margin-top:16px}.placeholder[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{position:absolute;background:#e3165b;border-radius:10px;height:6px;width:6px}.placeholder[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]{position:absolute;background:rgba(0,0,0,.54);left:6px;top:2px;height:1px;width:144px}.mat-tree-node[_ngcontent-%COMP%]{cursor:pointer;min-height:35px!important;height:35px!important;margin-top:5px;border-radius:5px}.cdk-drag-preview[_ngcontent-%COMP%]{background-color:grey;margin-top:15px;margin-left:15px;position:relative;padding:5px}.cdk-drag-preview[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{top:4px;position:absolute}.cdk-drag-preview[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:30px}.node-icon[_ngcontent-%COMP%]{padding-left:5px;padding-right:10px;top:1px;position:relative}.menu-icon[_ngcontent-%COMP%]{position:relative;top:2px;font-size:20px}.mat-menu-content[_ngcontent-%COMP%]{padding:0}.mat-menu-item[_ngcontent-%COMP%]{height:35px;line-height:35px;min-width:200px}mat-tree[_ngcontent-%COMP%]{max-height:650px;overflow:hidden;width:310px;-webkit-overflow-scrolling:touch}mat-tree[_ngcontent-%COMP%]:hover{overflow:auto}mat-tree[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px;height:8px}@media (hover:none){mat-tree[_ngcontent-%COMP%]::-webkit-scrollbar{width:0!important;height:0!important}}@media (pointer:coarse){mat-tree[_ngcontent-%COMP%]::-webkit-scrollbar{width:0!important;height:0!important}mat-tree[_ngcontent-%COMP%]::-webkit-scrollbar::-webkit-scrollbar-track{background:0 0}}mat-tree[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#cfcfcf}mat-tree[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#9e9e9e}mat-tree[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#707070}.op500[_ngcontent-%COMP%]{opacity:.5}.drag[_ngcontent-%COMP%]{margin-right:10px}.transitionD[_ngcontent-%COMP%]{transition:all 1s}"]],data:{}});function Rn(n){return l.Qb(0,[(n()(),l.ub(0,0,null,null,6,"div",[["class","p-2 pt-4 transitionD"]],null,null,null,null,null)),(n()(),l.ub(1,16777216,null,null,5,"button",[["aria-label","Maximize side panel"],["mat-icon-button",""],["matTooltip","Open side panel"],["matTooltipPosition","right"]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"],[null,"longpress"],[null,"keydown"],[null,"touchend"]],(function(n,e,t){var i=!0,a=n.component;return"longpress"===e&&(i=!1!==l.Gb(n,3).show()&&i),"keydown"===e&&(i=!1!==l.Gb(n,3)._handleKeydown(t)&&i),"touchend"===e&&(i=!1!==l.Gb(n,3)._handleTouchend()&&i),"click"===e&&(a.drawer=!a.drawer,i=0!=(a.menubtn=!a.menubtn)&&i),i}),r.d,r.b)),l.tb(2,180224,null,0,c.b,[l.k,u.h,[2,s.a]],null,null),l.tb(3,212992,null,0,d.d,[b.d,l.k,h.b,l.P,l.y,p.a,u.c,u.h,d.b,[2,m.b],[2,d.a],[2,g.f]],{position:[0,"position"],message:[1,"message"]},null),(n()(),l.ub(4,0,null,0,2,"mat-icon",[["class","mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,f.b,f.a)),l.tb(5,9158656,null,0,v.b,[l.k,v.d,[8,null],[2,v.a]],null,null),(n()(),l.Ob(-1,0,["menu"]))],(function(n,e){n(e,3,0,"right","Open side panel"),n(e,5,0)}),(function(n,e){n(e,1,0,l.Gb(e,2).disabled||null,"NoopAnimations"===l.Gb(e,2)._animationMode),n(e,4,0,l.Gb(e,5).inline,"primary"!==l.Gb(e,5).color&&"accent"!==l.Gb(e,5).color&&"warn"!==l.Gb(e,5).color)}))}function Qn(n){return l.Qb(0,[(n()(),l.ub(0,0,null,null,2,null,null,null,null,null,null,null)),(n()(),l.kb(16777216,null,null,1,null,Rn)),l.tb(2,16384,null,0,o.p,[l.P,l.M],{ngIf:[0,"ngIf"]},null),(n()(),l.kb(0,null,null,0))],(function(n,e){n(e,2,0,!e.component.menubtn)}),null)}function jn(n){return l.Qb(0,[(n()(),l.ub(0,16777216,null,null,5,"button",[["aria-label","Open side panel"],["mat-icon-button",""],["matTooltip","Minimize side panel"],["matTooltipPosition","right"]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"],[null,"longpress"],[null,"keydown"],[null,"touchend"]],(function(n,e,t){var i=!0,a=n.component;return"longpress"===e&&(i=!1!==l.Gb(n,2).show()&&i),"keydown"===e&&(i=!1!==l.Gb(n,2)._handleKeydown(t)&&i),"touchend"===e&&(i=!1!==l.Gb(n,2)._handleTouchend()&&i),"click"===e&&(a.drawer=!a.drawer,i=0!=(a.menubtn=!a.menubtn)&&i),i}),r.d,r.b)),l.tb(1,180224,null,0,c.b,[l.k,u.h,[2,s.a]],null,null),l.tb(2,212992,null,0,d.d,[b.d,l.k,h.b,l.P,l.y,p.a,u.c,u.h,d.b,[2,m.b],[2,d.a],[2,g.f]],{position:[0,"position"],message:[1,"message"]},null),(n()(),l.ub(3,0,null,0,2,"mat-icon",[["class","mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,f.b,f.a)),l.tb(4,9158656,null,0,v.b,[l.k,v.d,[8,null],[2,v.a]],null,null),(n()(),l.Ob(-1,0,["chevron_left"])),(n()(),l.kb(0,null,null,0))],(function(n,e){n(e,2,0,"right","Minimize side panel"),n(e,4,0)}),(function(n,e){n(e,0,0,l.Gb(e,1).disabled||null,"NoopAnimations"===l.Gb(e,1)._animationMode),n(e,3,0,l.Gb(e,4).inline,"primary"!==l.Gb(e,4).color&&"accent"!==l.Gb(e,4).color&&"warn"!==l.Gb(e,4).color)}))}function qn(n){return l.Qb(0,[(n()(),l.ub(0,16777216,null,null,5,"button",[["aria-label","Close side panel"],["mat-icon-button",""],["matTooltip","Close side panel"],["matTooltipPosition","right"]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"],[null,"longpress"],[null,"keydown"],[null,"touchend"]],(function(n,e,t){var i=!0,a=n.component;return"longpress"===e&&(i=!1!==l.Gb(n,2).show()&&i),"keydown"===e&&(i=!1!==l.Gb(n,2)._handleKeydown(t)&&i),"touchend"===e&&(i=!1!==l.Gb(n,2)._handleTouchend()&&i),"click"===e&&(i=!1!==a.closeSidenav()&&i),i}),r.d,r.b)),l.tb(1,180224,null,0,c.b,[l.k,u.h,[2,s.a]],null,null),l.tb(2,212992,null,0,d.d,[b.d,l.k,h.b,l.P,l.y,p.a,u.c,u.h,d.b,[2,m.b],[2,d.a],[2,g.f]],{position:[0,"position"],message:[1,"message"]},null),(n()(),l.ub(3,0,null,0,2,"mat-icon",[["class","mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,f.b,f.a)),l.tb(4,9158656,null,0,v.b,[l.k,v.d,[8,null],[2,v.a]],null,null),(n()(),l.Ob(-1,0,["keyboard_arrow_left"])),(n()(),l.kb(0,null,null,0))],(function(n,e){n(e,2,0,"right","Close side panel"),n(e,4,0)}),(function(n,e){n(e,0,0,l.Gb(e,1).disabled||null,"NoopAnimations"===l.Gb(e,1)._animationMode),n(e,3,0,l.Gb(e,4).inline,"primary"!==l.Gb(e,4).color&&"accent"!==l.Gb(e,4).color&&"warn"!==l.Gb(e,4).color)}))}function zn(n){return l.Qb(0,[(n()(),l.ub(0,0,null,null,2,"div",[["class","placeholder"]],null,null,null,null,null)),(n()(),l.ub(1,0,null,null,0,"span",[["class","dot"]],null,null,null,null,null)),(n()(),l.ub(2,0,null,null,0,"span",[["class","line"]],null,null,null,null,null))],null,null)}function Hn(n){return l.Qb(0,[(n()(),l.ub(0,0,null,null,6,"button",[["mat-icon-button",""],["matTreeNodeToggle",""]],[[1,"aria-label",0],[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(n,e,t){var i=!0;return"click"===e&&(i=!1!==l.Gb(n,3)._toggle(t)&&i),i}),r.d,r.b)),l.Lb(6144,null,$.i,null,[B.k]),l.tb(2,180224,null,0,c.b,[l.k,u.h,[2,s.a]],null,null),l.tb(3,16384,null,0,B.k,[$.c,$.e],null,null),(n()(),l.ub(4,0,null,0,2,"mat-icon",[["class","mat-icon-rtl-mirror mat-icon notranslate"],["role","img"]],[[2,"ws-mat-warn-text",null],[2,"ws-mat-default-text",null],[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,f.b,f.a)),l.tb(5,9158656,null,0,v.b,[l.k,v.d,[8,null],[2,v.a]],null,null),(n()(),l.Ob(6,0,[" "," "]))],(function(n,e){n(e,5,0)}),(function(n,e){var t=e.component;n(e,0,0,"toggle "+e.parent.context.$implicit.name,l.Gb(e,2).disabled||null,"NoopAnimations"===l.Gb(e,2)._animationMode),n(e,4,0,t.invalidIds.includes(e.parent.context.$implicit.id),!t.invalidIds.includes(e.parent.context.$implicit.id),l.Gb(e,5).inline,"primary"!==l.Gb(e,5).color&&"accent"!==l.Gb(e,5).color&&"warn"!==l.Gb(e,5).color),n(e,6,0,t.treeControl.isExpanded(e.parent.context.$implicit)?"expand_more":"chevron_right")}))}function Vn(n){return l.Qb(0,[(n()(),l.ub(0,0,null,null,1,"button",[["disabled",""],["mat-icon-button",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],null,null,r.d,r.b)),l.tb(1,180224,null,0,c.b,[l.k,u.h,[2,s.a]],{disabled:[0,"disabled"]},null)],(function(n,e){n(e,1,0,"")}),(function(n,e){n(e,0,0,l.Gb(e,1).disabled||null,"NoopAnimations"===l.Gb(e,1)._animationMode)}))}function Kn(n){return l.Qb(0,[(n()(),l.ub(0,0,null,null,1,"ws-auth-editor-options",[],null,[[null,"action"]],(function(n,e,t){var l=!0;return"action"===e&&(l=!1!==n.component.takeAction(t.action,n.parent.context.$implicit,t.type)&&l),l}),vn,pn)),l.tb(1,114688,null,0,hn,[G.a,y.a,bn],{node:[0,"node"],isInvalid:[1,"isInvalid"]},{action:"action"})],(function(n,e){n(e,1,0,e.parent.context.$implicit,e.component.invalidIds.includes(e.parent.context.$implicit.id))}),null)}function Jn(n){return l.Qb(0,[(n()(),l.ub(0,0,null,null,2,"div",[],null,null,null,null,null)),(n()(),l.ub(1,0,null,null,1,"ws-auth-table-tree-label",[],null,null,null,In,kn)),l.tb(2,114688,null,0,Cn,[y.a],{identifier:[0,"identifier"],id:[1,"id"],isDragging:[2,"isDragging"],icon:[3,"icon"]},null)],(function(n,e){var t=e.component;n(e,2,0,e.parent.context.$implicit.identifier,e.parent.context.$implicit.id,t.isDragging,t.isDropDisabled?"block":t.isDropDisabled||"center"!==t.draggingPosition?"format_indent_increase":"add_circle")}),null)}function Wn(n){return l.Qb(0,[(n()(),l.ub(0,0,null,null,2,"div",[["class","placeholder second"]],null,null,null,null,null)),(n()(),l.ub(1,0,null,null,0,"span",[["class","dot"]],null,null,null,null,null)),(n()(),l.ub(2,0,null,null,0,"span",[["class","line"]],null,null,null,null,null))],null,null)}function Xn(n){return l.Qb(0,[(n()(),l.ub(0,16777216,null,null,23,"mat-tree-node",[["cdkDrag","node.parent?.length && node.editable"],["class","auth-tree-node mat-tree-node cdk-drag"],["matTreeNodePadding",""]],[[2,"selected",null],[2,"ws-mat-warn-text",null],[1,"aria-expanded",0],[1,"aria-level",0],[1,"role",0],[2,"cdk-drag-disabled",null],[2,"cdk-drag-dragging",null]],[[null,"mousemove"],[null,"mouseleave"],[null,"cdkDragStarted"],[null,"cdkDragReleased"],[null,"click"]],(function(n,e,t){var l=!0,i=n.component;return"mousemove"===e&&(l=!1!==i.dragHover(n.context.$implicit,t)&&l),"mouseleave"===e&&(l=!1!==i.dragHoverEnd(t)&&l),"cdkDragStarted"===e&&(l=!1!==i.dragStart(n.context.$implicit)&&l),"cdkDragReleased"===e&&(l=!1!==i.dragEnd()&&l),"click"===e&&(l=!1!==i.onNodeSelect(n.context.$implicit)&&l),l}),null,null)),l.Lb(6144,null,$.h,null,[B.j]),l.Lb(6144,null,En.m,null,[En.c]),l.tb(3,16384,null,0,B.g,[l.k,$.c,[8,null]],null,null),l.Lb(2048,null,$.e,null,[B.g]),l.tb(5,147456,null,0,B.j,[$.e,$.c,l.D,l.k,[2,m.b]],{level:[0,"level"],indent:[1,"indent"]},null),l.tb(6,4866048,[[2,4]],3,En.c,[l.k,[3,En.b],o.d,l.y,l.P,En.a,[2,m.b],En.i,l.h],{data:[0,"data"]},{started:"cdkDragStarted",released:"cdkDragReleased"}),l.Mb(603979776,3,{_handles:1}),l.Mb(603979776,4,{_previewTemplate:0}),l.Mb(603979776,5,{_placeholderTemplate:0}),(n()(),l.kb(16777216,null,null,1,null,zn)),l.tb(11,16384,null,0,o.p,[l.P,l.M],{ngIf:[0,"ngIf"]},null),(n()(),l.kb(16777216,null,null,1,null,Hn)),l.tb(13,16384,null,0,o.p,[l.P,l.M],{ngIf:[0,"ngIf"]},null),(n()(),l.kb(16777216,null,null,1,null,Vn)),l.tb(15,16384,null,0,o.p,[l.P,l.M],{ngIf:[0,"ngIf"]},null),(n()(),l.ub(16,0,null,null,1,"ws-auth-table-tree-label",[],null,null,null,In,kn)),l.tb(17,114688,null,0,Cn,[y.a],{identifier:[0,"identifier"],id:[1,"id"],isDragging:[2,"isDragging"],isInvalid:[3,"isInvalid"]},null),(n()(),l.kb(16777216,null,null,1,null,Kn)),l.tb(19,16384,null,0,o.p,[l.P,l.M],{ngIf:[0,"ngIf"]},null),(n()(),l.kb(0,null,null,1,null,Jn)),l.tb(21,16384,[[4,4]],0,En.f,[l.M],null,null),(n()(),l.kb(16777216,null,null,1,null,Wn)),l.tb(23,16384,null,0,o.p,[l.P,l.M],{ngIf:[0,"ngIf"]},null),(n()(),l.kb(0,null,null,0))],(function(n,e){var t=e.component;n(e,5,0,"",20),n(e,6,0,e.context.$implicit),n(e,11,0,"above"===t.draggingPosition&&e.context.$implicit===t.dropContainer&&e.context.$implicit.parentId),n(e,13,0,e.context.$implicit.expandable),n(e,15,0,!e.context.$implicit.expandable),n(e,17,0,e.context.$implicit.identifier,e.context.$implicit.id,t.isDragging,t.invalidIds.includes(e.context.$implicit.id)),n(e,19,0,e.context.$implicit.editable),n(e,23,0,"below"===t.draggingPosition&&e.context.$implicit===t.dropContainer&&e.context.$implicit.parentId)}),(function(n,e){var t=e.component;n(e,0,0,e.context.$implicit.id===t.selectedNode,t.invalidIds.includes(e.context.$implicit.id),l.Gb(e,3).isExpanded,"treeitem"===l.Gb(e,3).role?l.Gb(e,3).level:null,l.Gb(e,3).role,l.Gb(e,6).disabled,l.Gb(e,6)._dragRef.isDragging())}))}function Yn(n){return l.Qb(0,[(n()(),l.ub(0,0,null,null,20,"div",[["class","transitionD"]],null,null,null,null,null)),(n()(),l.ub(1,0,null,null,8,"mat-card",[["class","flex items-center mat-card custom-card mat-card"]],[[2,"_mat-animation-noopable",null]],null,null,_n.d,_n.a)),l.tb(2,49152,null,0,Pn.a,[[2,s.a]],null,null),(n()(),l.ub(3,0,null,0,1,"h2",[["class","flex mat-h w-full justify-center pt-5"]],null,null,null,null,null)),(n()(),l.Ob(-1,null,[" TABLE OF CONTENTS "])),(n()(),l.kb(16777216,null,0,1,null,jn)),l.tb(6,16384,null,0,o.p,[l.P,l.M],{ngIf:[0,"ngIf"]},null),(n()(),l.kb(16777216,null,0,1,null,qn)),l.tb(8,16384,null,0,o.p,[l.P,l.M],{ngIf:[0,"ngIf"]},null),(n()(),l.ub(9,0,null,0,0,"hr",[],null,null,null,null,null)),(n()(),l.ub(10,0,null,null,10,"mat-tree",[["cdkDropList",""],["cdkDropListSortingDisabled",""],["class","px-2 mat-tree cdk-drop-list"],["role","tree"]],[[8,"id",0],[2,"cdk-drop-list-disabled",null],[2,"cdk-drop-list-dragging",null],[2,"cdk-drop-list-receiving",null]],[[null,"cdkDropListDropped"]],(function(n,e,t){var l=!0;return"cdkDropListDropped"===e&&(l=!1!==n.component.drop()&&l),l}),On.b,On.a)),l.Lb(6144,null,$.c,null,[B.b]),l.Lb(6144,null,En.b,null,[En.g]),l.tb(13,2342912,null,1,B.b,[l.r,l.h],{dataSource:[0,"dataSource"],treeControl:[1,"treeControl"]},null),l.Mb(603979776,1,{_nodeDefs:1}),l.tb(15,1196032,null,1,En.g,[l.k,En.i,l.h,[2,m.b],[3,En.h]],{sortingDisabled:[0,"sortingDisabled"]},{dropped:"cdkDropListDropped"}),l.Mb(603979776,2,{_draggables:1}),l.Lb(256,null,En.h,void 0,[]),(n()(),l.kb(0,null,null,2,null,Xn)),l.tb(19,16384,null,0,B.h,[l.M],null,null),l.Lb(2048,[[1,4]],$.f,null,[B.h])],(function(n,e){var t=e.component;n(e,6,0,!t.mediumScreen),n(e,8,0,t.mediumScreen),n(e,13,0,t.dataSource,t.treeControl),n(e,15,0,"")}),(function(n,e){n(e,1,0,"NoopAnimations"===l.Gb(e,2)._animationMode),n(e,10,0,l.Gb(e,15).id,l.Gb(e,15).disabled,l.Gb(e,15)._dropListRef.isDragging(),l.Gb(e,15)._dropListRef.isReceiving())}))}function Zn(n){return l.Qb(0,[(n()(),l.ub(0,0,null,null,4,"div",[["class","flex"]],null,null,null,null,null)),(n()(),l.kb(16777216,null,null,1,null,Qn)),l.tb(2,16384,null,0,o.p,[l.P,l.M],{ngIf:[0,"ngIf"]},null),(n()(),l.kb(16777216,null,null,1,null,Yn)),l.tb(4,16384,null,0,o.p,[l.P,l.M],{ngIf:[0,"ngIf"]},null)],(function(n,e){var t=e.component;n(e,2,0,!t.mediumScreen),n(e,4,0,t.drawer)}),null)}var ne=t("laM3"),ee=t("c9HD"),te=t("SceP"),le=t("Sv6P"),ie=t("UbwY"),ae=t("cErF"),oe=t("SUJ7"),re=t("gCSd"),ce=t("UAay"),ue=t("LRne"),se=t("5+tZ"),de=t("JIr8"),be=t("vkgz"),he=t("iJLM"),pe=t("jKoo");class me{constructor(n,e,t,l,i,a,o,r,c,u,s,d,b){this.contentService=n,this.activateRoute=e,this.storeService=t,this.resolverService=l,this.initService=i,this.loaderService=a,this.dialog=o,this.snackBar=r,this.editorService=c,this.router=u,this.notificationSvc=s,this.accessControlSvc=d,this.breakpointObserver=b,this.contents=[],this.stepper=[{title:"Choose Type",disabled:!0},{title:"Content",disabled:!1},{title:"Details",disabled:!1}],this.isSubmitPressed=!1,this.showLanguageBar=!1,this.actionButton=null,this.currentStep=1,this.activeContentSubscription=null,this.routerSubscription=null,this.isChanged=!1,this.previewIdentifier=null,this.viewMode="meta",this.mimeTypeRoute="",this.mediumScreen=!1,this.sideBarOpened=!1,this.mediumSizeBreakpoint$=this.breakpointObserver.observe([$n.b.XSmall,$n.b.Small]).pipe(Object(Bn.a)(n=>n.matches)),this.mode$=this.mediumSizeBreakpoint$.pipe(Object(Bn.a)(n=>n?"over":"side")),this.leftArrow=!0,this.fullScreenToggle=()=>{const n=document;let e=n.getElementById("auth-toc");e||(e=n.getElementById("edit-meta")),e||(e=n.getElementById("auth-root")),e.requestFullscreen?n.fullscreenElement?n.exitFullscreen():e.requestFullscreen():e.mozRequestFullScreen?n.mozFullScreen?n.mozCancelFullScreen():e.mozRequestFullScreen():e.msRequestFullscreen?n.msFullscreenElement?n.msExitFullscreen():e.msRequestFullscreen():e.webkitRequestFullscreen&&(n.webkitIsFullscreen?n.webkitCancelFullscreen():e.webkitRequestFullscreen())}}ngOnInit(){this.contentService.changeActiveCont.subscribe(n=>{this.currentContent=n,"Resource"!==this.contentService.getUpdatedMeta(n).contentType&&(this.viewMode="meta")}),this.activateRoute.parent&&this.activateRoute.parent.parent&&(this.routerSubscription=this.activateRoute.parent.parent.data.subscribe(n=>{const e=new Map;n.contents.map(n=>{this.storeService.parentNode.push(n.content.identifier),this.resolverService.buildTreeAndMap(n.content,e,this.storeService.flatNodeMap,this.storeService.uniqueIdMap,this.storeService.lexIdMap)}),e.forEach(n=>this.contentService.setOriginalMeta(n));const t=this.storeService.lexIdMap.get(this.currentContent)[0];this.currentParentId=this.currentContent,this.storeService.treeStructureChange.next(this.storeService.flatNodeMap.get(t)),this.storeService.currentParentNode=t,this.storeService.currentSelectedNode=t,this.storeService.selectedNodeChange.next(t)})),this.stepper=this.initService.collectionConfig.stepper,this.showLanguageBar=this.initService.collectionConfig.languageBar;const n=[];this.initService.collectionConfig.actionButtons.buttons.forEach(e=>{this.contentService.checkConditionV2(this.contentService.getOriginalMeta(this.currentParentId),e.conditions)&&n.push({title:e.title,icon:e.icon,event:e.event,conditions:e.conditions})}),this.actionButton={enabled:this.initService.collectionConfig.actionButtons.enabled,buttons:n},this.mediumSizeBreakpoint$.subscribe(n=>{this.mediumScreen=n,this.sideBarOpened=!n})}ngOnDestroy(){this.loaderService.changeLoad.next(!1)}sidenavClose(){setTimeout(()=>this.leftArrow=!0,500)}save(n){Object.keys(this.contentService.upDatedContent||{}).length||Object.keys(this.storeService.changedHierarchy).length?(this.isChanged=!0,this.loaderService.changeLoad.next(!0),this.triggerSave().subscribe(()=>{n&&this.action({actions:n}),this.loaderService.changeLoad.next(!1),this.snackBar.openFromComponent(An.a,{data:{type:Nn.a.SAVE_SUCCESS},duration:1e3*Dn.b})},n=>{if(409===n.status){const e=new Map;Object.keys(this.contentService.originalContent).forEach(n=>e.set(n,this.contentService.originalContent[n])),this.dialog.open(ce.a,{width:"80vw",height:"90vh",data:{errorFromBackendData:n.error,dataMapping:e}}).afterClosed().subscribe(n=>{n&&("string"==typeof n?(this.storeService.selectedNodeChange.next(this.storeService.lexIdMap.get(n)[0]),this.contentService.changeActiveCont.next(n)):(this.storeService.selectedNodeChange.next(n),this.contentService.changeActiveCont.next(this.storeService.uniqueIdMap.get(n))))})}this.loaderService.changeLoad.next(!1),this.snackBar.openFromComponent(An.a,{data:{type:Nn.a.SAVE_FAIL},duration:1e3*Dn.b})})):n?this.action(n):this.snackBar.openFromComponent(An.a,{data:{type:Nn.a.UP_TO_DATE},duration:1e3*Dn.b})}get validationCheck(){const n=this.storeService.lexIdMap.get(this.currentParentId),e=this.storeService.validationCheck(n[0]);return!e||(this.dialog.open(ce.a,{width:"80vw",height:"90vh",data:{processErrorData:e}}).afterClosed().subscribe(n=>{n&&("string"==typeof n?(this.storeService.selectedNodeChange.next(this.storeService.lexIdMap.get(n)[0]),this.contentService.changeActiveCont.next(n)):(this.storeService.selectedNodeChange.next(n),this.contentService.changeActiveCont.next(this.storeService.uniqueIdMap.get(n))))}),!1)}takeAction(){this.isSubmitPressed=!0,Object.keys(this.contentService.upDatedContent||{}).length||this.isChanged?this.validationCheck&&this.dialog.open(re.a,{width:"750px",height:"450px",data:this.contentService.getOriginalMeta(this.currentParentId)}).afterClosed().subscribe(n=>{this.finalCall(n)}):this.snackBar.openFromComponent(An.a,{data:{type:Nn.a.UP_TO_DATE},duration:1e3*Dn.b})}finalCall(n){if(n){const e={comment:n.controls.comments.value,operation:"accept"===n.controls.action.value||["Draft","Live"].includes(this.contentService.originalContent[this.currentParentId].status)?1:0},t=this.contentService.getUpdatedMeta(this.currentParentId),l=(Object.keys(this.contentService.upDatedContent||{}).length||Object.keys(this.storeService.changedHierarchy).length?this.triggerSave():Object(ue.a)({})).pipe(Object(se.a)(()=>this.editorService.forwardBackward(e,this.currentParentId,this.contentService.originalContent[this.currentParentId].status).pipe(Object(se.a)(()=>this.notificationSvc.triggerPushPullNotification(t,e.comment,!!e.operation).pipe(Object(de.a)(()=>Object(ue.a)({})))))));this.loaderService.changeLoad.next(!0),l.subscribe(()=>{this.loaderService.changeLoad.next(!1),this.snackBar.openFromComponent(An.a,{data:{type:this.getMessage("success")},duration:1e3*Dn.b}),this.contents=this.contents.filter(n=>n.identifier!==this.currentParentId),this.contents.length?this.contentService.changeActiveCont.next(this.contents[0].identifier):this.router.navigateByUrl("/author/home")},n=>{if(409===n.status){const e=new Map;Object.keys(this.contentService.originalContent).forEach(n=>e.set(n,this.contentService.originalContent[n])),this.dialog.open(ce.a,{width:"80vw",height:"90vh",data:{errorFromBackendData:n.error,dataMapping:e}}).afterClosed().subscribe(n=>{n&&("string"==typeof n?(this.storeService.selectedNodeChange.next(this.storeService.lexIdMap.get(n)[0]),this.contentService.changeActiveCont.next(n)):(this.storeService.selectedNodeChange.next(n),this.contentService.changeActiveCont.next(this.storeService.uniqueIdMap.get(n))))})}this.loaderService.changeLoad.next(!1),this.snackBar.openFromComponent(An.a,{data:{type:this.getMessage("failure")},duration:1e3*Dn.b})})}}preview(n){const e=Object.keys(this.contentService.upDatedContent||{}).length||Object.keys(this.storeService.changedHierarchy).length?this.triggerSave():Object(ue.a)({});this.loaderService.changeLoad.next(!0),e.subscribe(()=>{this.mimeTypeRoute=Object(he.n)(this.contentService.getUpdatedMeta(n).mimeType),this.loaderService.changeLoad.next(!1),this.previewIdentifier=n},n=>{if(409===n.status){const e=new Map;Object.keys(this.contentService.originalContent).forEach(n=>e.set(n,this.contentService.originalContent[n])),this.dialog.open(ce.a,{width:"750px",height:"450px",data:{errorFromBackendData:n.error,dataMapping:e}}).afterClosed().subscribe(n=>{n&&("string"==typeof n?(this.storeService.selectedNodeChange.next(this.storeService.lexIdMap.get(n)[0]),this.contentService.changeActiveCont.next(n)):(this.storeService.selectedNodeChange.next(n),this.contentService.changeActiveCont.next(this.storeService.uniqueIdMap.get(n))))})}this.loaderService.changeLoad.next(!1),this.snackBar.openFromComponent(An.a,{data:{type:Nn.a.SAVE_FAIL},duration:1e3*Dn.b})})}closePreview(){this.previewIdentifier=null}triggerSave(){const n={};let e=!1;return Object.keys(this.contentService.upDatedContent).forEach(t=>{e||(e=this.storeService.parentNode.includes(t)),n[t]={isNew:!1,root:this.storeService.parentNode.includes(t),metadata:this.contentService.upDatedContent[t]}}),e||(n[this.currentParentId]={isNew:!1,root:!0,metadata:{}}),this.editorService.updateContentV2({nodesModified:n,hierarchy:this.storeService.changedHierarchy}).pipe(Object(be.a)(()=>{this.storeService.changedHierarchy={},Object.keys(this.contentService.upDatedContent).forEach(n=>{this.contentService.resetOriginalMeta(this.contentService.upDatedContent[n],n)}),this.contentService.upDatedContent={}}))}getMessage(n){if("success"===n)switch(this.contentService.originalContent[this.currentParentId].status){case"Draft":case"Live":return Nn.a.SEND_FOR_REVIEW_SUCCESS;case"InReview":return Nn.a.REVIEW_SUCCESS;case"Reviewed":return Nn.a.PUBLISH_SUCCESS;default:return""}switch(this.contentService.originalContent[this.currentParentId].status){case"Draft":case"Live":return Nn.a.SEND_FOR_REVIEW_FAIL;case"InReview":return Nn.a.REVIEW_FAIL;case"Reviewed":return Nn.a.PUBLISH_FAIL;default:return""}}subAction(n){switch(this.contentService.changeActiveCont.next(n.identifier),n.type){case"editMeta":this.viewMode="meta";break;case"editContent":const e=this.contentService.getUpdatedMeta(n.identifier);["application/pdf","application/x-mpegURL"].includes(e.mimeType)?this.viewMode="upload":"application/html"!==e.mimeType||e.isExternal?"application/html"===e.mimeType?this.viewMode="curate":"application/quiz"===e.mimeType?this.viewMode="quiz":"application/web-module"===e.mimeType&&(this.viewMode="web"):this.viewMode="upload";break;case"preview":this.preview(n.identifier)}}action(n){let e=n;switch(void 0===e.actions&&(e={actions:n}),e.actions){case"skip":case"next":this.viewMode="meta";break;case"save":this.save();break;case"saveAndNext":this.save("next");break;case"preview":this.preview(this.currentContent);break;case"push":"publish"===this.getAction()?this.dialog.open(Tn.a,{width:"70%",data:"publishMessage"}).afterClosed().subscribe(n=>{n&&this.takeAction()}):this.takeAction();break;case"delete":this.dialog.open(oe.a,{width:"600px",height:"auto",data:this.contentService.getUpdatedMeta(this.currentParentId)}).afterClosed().subscribe(n=>{n&&(this.contents=this.contents.filter(n=>n.identifier!==this.currentParentId),this.contents.length?this.contentService.changeActiveCont.next(this.contents[0].identifier):this.router.navigateByUrl("/author/home"))});break;case"fullscreen":case"fulls":this.fullScreenToggle();break;case"close":this.router.navigateByUrl("/author/home")}}delete(){this.loaderService.changeLoad.next(!0),this.editorService.deleteContent(this.currentParentId).subscribe(()=>{this.loaderService.changeLoad.next(!1),this.snackBar.openFromComponent(An.a,{data:{type:Nn.a.SUCCESS},duration:1e3*Dn.b}),this.contents=this.contents.filter(n=>n.identifier!==this.currentParentId),this.contents.length?this.contentService.changeActiveCont.next(this.contents[0].identifier):this.router.navigateByUrl("/author/home")},n=>{if(409===n.status){const e=new Map;Object.keys(this.contentService.originalContent).forEach(n=>e.set(n,this.contentService.originalContent[n])),this.dialog.open(ce.a,{width:"750px",height:"450px",data:{errorFromBackendData:n.error,dataMapping:e}}).afterClosed().subscribe(n=>{n&&("string"==typeof n?(this.storeService.selectedNodeChange.next(this.storeService.lexIdMap.get(n)[0]),this.contentService.changeActiveCont.next(n)):(this.storeService.selectedNodeChange.next(n),this.contentService.changeActiveCont.next(this.storeService.uniqueIdMap.get(n))))})}this.loaderService.changeLoad.next(!1),this.snackBar.openFromComponent(An.a,{data:{type:Nn.a.CONTENT_FAIL},duration:1e3*Dn.b})})}getAction(){switch(this.contentService.originalContent[this.currentParentId].status){case"Draft":case"Live":return"sendForReview";case"InReview":return"review";case"Reviewed":return"publish";default:return"sendForReview"}}canDelete(){return this.accessControlSvc.hasRole(["editor","admin"])||["Draft","Live"].includes(this.contentService.originalContent[this.currentParentId].status)&&this.contentService.originalContent[this.currentParentId].creatorContacts.find(n=>n.id===this.accessControlSvc.userId)}}var ge=l.sb({encapsulation:0,styles:[[".mat-sidenav-container[_ngcontent-%COMP%]{min-height:650px;overflow:unset}.mat-sidenav[_ngcontent-%COMP%]{overflow:unset}.mat-drawer-content[_ngcontent-%COMP%]{padding-left:3px}.sticky[_ngcontent-%COMP%]{position:sticky;top:50px}.close-preview[_ngcontent-%COMP%]{position:fixed;top:15px;left:15px;font-size:30px;cursor:pointer;z-index:1001}.hidden[_ngcontent-%COMP%]{display:none}.transitionD[_ngcontent-%COMP%]{transition:all .5s}.ui[_ngcontent-%COMP%]{border:1px solid #1a1919;border-left-color:#fff;box-shadow:.1px 2px 8px grey;width:42px;border-radius:0 50% 50% 0}.toHide[_ngcontent-%COMP%]{visibility:hidden}"]],data:{}});function fe(n){return l.Qb(0,[(n()(),l.ub(0,0,null,null,10,"div",[],null,null,null,null,null)),(n()(),l.ub(1,0,null,null,9,"div",[["class","ui"]],null,null,null,null,null)),l.Lb(512,null,o.I,o.J,[l.r,l.s,l.k,l.D]),l.tb(3,278528,null,0,o.n,[o.I],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l.Jb(4,{toHide:0}),(n()(),l.ub(5,16777216,null,null,5,"button",[["aria-label","Open side panel"],["class","p-1"],["mat-icon-button",""],["matTooltip","Open side panel"],["matTooltipPosition","right"]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"],[null,"longpress"],[null,"keydown"],[null,"touchend"]],(function(n,e,t){var i=!0,a=n.component;return"longpress"===e&&(i=!1!==l.Gb(n,7).show()&&i),"keydown"===e&&(i=!1!==l.Gb(n,7)._handleKeydown(t)&&i),"touchend"===e&&(i=!1!==l.Gb(n,7)._handleTouchend()&&i),"click"===e&&(l.Gb(n.parent,8).toggle(),i=0!=(a.leftArrow=!a.leftArrow)&&i),i}),r.d,r.b)),l.tb(6,180224,null,0,c.b,[l.k,u.h,[2,s.a]],null,null),l.tb(7,212992,null,0,d.d,[b.d,l.k,h.b,l.P,l.y,p.a,u.c,u.h,d.b,[2,m.b],[2,d.a],[2,g.f]],{position:[0,"position"],message:[1,"message"]},null),(n()(),l.ub(8,0,null,0,2,"mat-icon",[["class","mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,f.b,f.a)),l.tb(9,9158656,null,0,v.b,[l.k,v.d,[8,null],[2,v.a]],null,null),(n()(),l.Ob(-1,0,["keyboard_arrow_right"]))],(function(n,e){var t=n(e,4,0,!e.component.leftArrow);n(e,3,0,"ui",t),n(e,7,0,"right","Open side panel"),n(e,9,0)}),(function(n,e){n(e,5,0,l.Gb(e,6).disabled||null,"NoopAnimations"===l.Gb(e,6)._animationMode),n(e,8,0,l.Gb(e,9).inline,"primary"!==l.Gb(e,9).color&&"accent"!==l.Gb(e,9).color&&"warn"!==l.Gb(e,9).color)}))}function ve(n){return l.Qb(0,[(n()(),l.ub(0,0,null,null,1,"ws-auth-url-upload",[],null,[[null,"data"]],(function(n,e,t){var l=!0;return"data"===e&&(l=!1!==n.component.action(t)&&l),l}),C.b,C.a)),l.tb(1,114688,null,0,k.a,[w.f,x.c,S.e,y.a,M.a,G.a],{isCollectionEditor:[0,"isCollectionEditor"],isSubmitPressed:[1,"isSubmitPressed"]},{data:"data"})],(function(n,e){n(e,1,0,!0,e.component.isSubmitPressed)}),null)}function Ce(n){return l.Qb(0,[(n()(),l.ub(0,0,null,null,1,"ws-auth-file-upload",[],null,[[null,"data"]],(function(n,e,t){var l=!0;return"data"===e&&(l=!1!==n.component.action(t)&&l),l}),I.b,I.a)),l.tb(1,114688,null,0,E.a,[w.f,x.c,S.e,y.a,_.a,P.a,G.a,O.a,D.a,N.a],{isCollectionEditor:[0,"isCollectionEditor"],isSubmitPressed:[1,"isSubmitPressed"]},{data:"data"})],(function(n,e){n(e,1,0,!0,e.component.isSubmitPressed)}),null)}function ke(n){return l.Qb(0,[(n()(),l.ub(0,0,null,null,4,"div",[],null,null,null,null,null)),(n()(),l.Ob(-1,null,[" Please go to drafts to edit Web Pages or Click "])),(n()(),l.ub(2,0,null,null,2,"a",[["aria-label","Back"],["class","m-auto"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(n,e,t){var i=!0;return"click"===e&&(i=!1!==l.Gb(n,3).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&i),i}),null,null)),l.tb(3,671744,null,0,T.r,[T.o,T.a,o.l],{routerLink:[0,"routerLink"]},null),(n()(),l.Ob(-1,null,[" here "]))],(function(n,e){n(e,3,0,l.yb(1,"/author/editor/",e.component.currentContent,"/assessment"))}),(function(n,e){n(e,2,0,l.Gb(e,3).target,l.Gb(e,3).href)}))}function we(n){return l.Qb(0,[(n()(),l.ub(0,0,null,null,4,"div",[],null,null,null,null,null)),(n()(),l.Ob(-1,null,[" Please go to drafts to edit Web Pages or Click "])),(n()(),l.ub(2,0,null,null,2,"a",[["aria-label","Back"],["class","m-auto"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(n,e,t){var i=!0;return"click"===e&&(i=!1!==l.Gb(n,3).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&i),i}),null,null)),l.tb(3,671744,null,0,T.r,[T.o,T.a,o.l],{routerLink:[0,"routerLink"]},null),(n()(),l.Ob(-1,null,[" here "]))],(function(n,e){n(e,3,0,l.yb(1,"/author/editor/",e.component.currentContent,"/web-module"))}),(function(n,e){n(e,2,0,l.Gb(e,3).target,l.Gb(e,3).href)}))}function xe(n){return l.Qb(0,[(n()(),l.ub(0,0,null,null,25,null,null,null,null,null,null,null)),(n()(),l.kb(16777216,null,null,1,null,fe)),l.tb(2,16384,null,0,o.p,[l.P,l.M],{ngIf:[0,"ngIf"]},null),(n()(),l.ub(3,0,null,null,22,"mat-sidenav-container",[["autosize","true"],["class","example-container mat-drawer-container mat-sidenav-container"],["id","auth-toc"]],[[2,"mat-drawer-container-explicit-backdrop",null]],null,null,A.d,A.b)),l.tb(4,1490944,null,2,L.f,[[2,m.b],l.k,l.y,l.h,h.e,L.a,[2,s.a]],{autosize:[0,"autosize"]},null),l.Mb(603979776,1,{_drawers:1}),l.Mb(603979776,2,{_content:0}),(n()(),l.ub(7,0,null,0,5,"mat-sidenav",[["class","mat-drawer mat-sidenav"],["tabIndex","-1"]],[[1,"align",0],[2,"mat-drawer-end",null],[2,"mat-drawer-over",null],[2,"mat-drawer-push",null],[2,"mat-drawer-side",null],[2,"mat-drawer-opened",null],[2,"mat-sidenav-fixed",null],[4,"top","px"],[4,"bottom","px"],[40,"@transform",0]],[[null,"openedChange"],[null,"closedStart"],["component","@transform.start"],["component","@transform.done"]],(function(n,e,t){var i=!0,a=n.component;return"component:@transform.start"===e&&(i=!1!==l.Gb(n,8)._animationStartListener(t)&&i),"component:@transform.done"===e&&(i=!1!==l.Gb(n,8)._animationDoneListener(t)&&i),"openedChange"===e&&(i=!1!==(a.sideBarOpened=t)&&i),"closedStart"===e&&(i=!1!==a.sidenavClose()&&i),i}),A.f,A.a)),l.tb(8,3325952,[[1,4],["sidenav",4]],0,L.e,[l.k,u.i,u.h,p.a,l.y,[2,o.d]],{mode:[0,"mode"],opened:[1,"opened"]},{openedChange:"openedChange",closedStart:"closedStart"}),l.Ib(131072,o.b,[l.h]),(n()(),l.ub(10,0,null,0,2,"div",[["class","sticky"]],null,null,null,null,null)),(n()(),l.ub(11,0,null,null,1,"ws-auth-table-of-contents",[],null,[[null,"action"],[null,"closeEvent"]],(function(n,e,t){var i=!0,a=n.component;return"action"===e&&(i=!1!==a.subAction(t)&&i),"closeEvent"===e&&(l.Gb(n,8).toggle(),i=0!=(a.leftArrow=!a.leftArrow)&&i),i}),Zn,Un)),l.tb(12,245760,null,0,Fn,[S.e,x.c,bn,y.a,P.a,G.a,$n.a],null,{action:"action",closeEvent:"closeEvent"}),(n()(),l.ub(13,0,null,1,12,"mat-sidenav-content",[["class","pl-6 pr-6 ml-6 mat-drawer-content mat-sidenav-content"]],[[4,"margin-left","px"],[4,"margin-right","px"]],null,null,A.e,A.c)),l.tb(14,1294336,[[2,4]],0,L.g,[l.h,L.f,l.k,h.b,l.y],null,null),(n()(),l.ub(15,0,null,0,10,"div",[],null,null,null,null,null)),(n()(),l.ub(16,0,null,null,1,"ws-auth-edit-meta",[["type",""]],[[2,"hidden",null]],[[null,"data"]],(function(n,e,t){var l=!0;return"data"===e&&(l=!1!==n.component.action(t)&&l),l}),ne.b,ne.a)),l.tb(17,4440064,null,0,ee.a,[w.f,_.a,x.c,S.e,on.a,y.a,M.a,l.h,te.a,P.a,G.a,D.a,S.a],{isSubmitPressed:[0,"isSubmitPressed"],type:[1,"type"],parentContent:[2,"parentContent"]},{data:"data"}),(n()(),l.kb(16777216,null,null,1,null,ve)),l.tb(19,16384,null,0,o.p,[l.P,l.M],{ngIf:[0,"ngIf"]},null),(n()(),l.kb(16777216,null,null,1,null,Ce)),l.tb(21,16384,null,0,o.p,[l.P,l.M],{ngIf:[0,"ngIf"]},null),(n()(),l.kb(16777216,null,null,1,null,ke)),l.tb(23,16384,null,0,o.p,[l.P,l.M],{ngIf:[0,"ngIf"]},null),(n()(),l.kb(16777216,null,null,1,null,we)),l.tb(25,16384,null,0,o.p,[l.P,l.M],{ngIf:[0,"ngIf"]},null)],(function(n,e){var t=e.component;n(e,2,0,t.mediumScreen),n(e,4,0,"true"),n(e,8,0,l.Pb(e,8,0,l.Gb(e,9).transform(t.mode$)),t.sideBarOpened),n(e,12,0),n(e,14,0),n(e,17,0,t.isSubmitPressed,"",t.currentParentId),n(e,19,0,"curate"===t.viewMode),n(e,21,0,"upload"===t.viewMode),n(e,23,0,"quiz"===t.viewMode),n(e,25,0,"web"===t.viewMode)}),(function(n,e){var t=e.component;n(e,3,0,l.Gb(e,4)._backdropOverride),n(e,7,0,null,"end"===l.Gb(e,8).position,"over"===l.Gb(e,8).mode,"push"===l.Gb(e,8).mode,"side"===l.Gb(e,8).mode,l.Gb(e,8).opened,l.Gb(e,8).fixedInViewport,l.Gb(e,8).fixedInViewport?l.Gb(e,8).fixedTopGap:null,l.Gb(e,8).fixedInViewport?l.Gb(e,8).fixedBottomGap:null,l.Gb(e,8)._animationState),n(e,13,0,l.Gb(e,14)._container._contentMargins.left,l.Gb(e,14)._container._contentMargins.right),n(e,16,0,"meta"!==t.viewMode)}))}function Se(n){return l.Qb(0,[(n()(),l.ub(0,0,null,null,6,"div",[],null,null,null,null,null)),(n()(),l.ub(1,16777216,null,null,3,"mat-icon",[["class","close-preview mat-icon notranslate"],["matTooltip","Back"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],[[null,"click"],[null,"longpress"],[null,"keydown"],[null,"touchend"]],(function(n,e,t){var i=!0,a=n.component;return"longpress"===e&&(i=!1!==l.Gb(n,3).show()&&i),"keydown"===e&&(i=!1!==l.Gb(n,3)._handleKeydown(t)&&i),"touchend"===e&&(i=!1!==l.Gb(n,3)._handleTouchend()&&i),"click"===e&&(i=!1!==a.closePreview()&&i),i}),f.b,f.a)),l.tb(2,9158656,null,0,v.b,[l.k,v.d,[8,null],[2,v.a]],null,null),l.tb(3,212992,null,0,d.d,[b.d,l.k,h.b,l.P,l.y,p.a,u.c,u.h,d.b,[2,m.b],[2,d.a],[2,g.f]],{message:[0,"message"]},null),(n()(),l.Ob(-1,0,[" arrow_back"])),(n()(),l.ub(5,0,null,null,1,"ws-auth-viewer",[],null,null,null,le.b,le.a)),l.tb(6,4964352,null,0,ie.a,[D.a],{identifier:[0,"identifier"],mimeTypeRoute:[1,"mimeTypeRoute"]},null)],(function(n,e){var t=e.component;n(e,2,0),n(e,3,0,"Back"),n(e,6,0,t.previewIdentifier,t.mimeTypeRoute)}),(function(n,e){n(e,1,0,l.Gb(e,2).inline,"primary"!==l.Gb(e,2).color&&"accent"!==l.Gb(e,2).color&&"warn"!==l.Gb(e,2).color)}))}function ye(n){return l.Qb(0,[(n()(),l.kb(16777216,null,null,1,null,xe)),l.tb(1,16384,null,0,o.p,[l.P,l.M],{ngIf:[0,"ngIf"]},null),(n()(),l.kb(16777216,null,null,1,null,Se)),l.tb(3,16384,null,0,o.p,[l.P,l.M],{ngIf:[0,"ngIf"]},null)],(function(n,e){var t=e.component;n(e,1,0,!t.previewIdentifier),n(e,3,0,t.previewIdentifier)}),null)}function Me(n){return l.Qb(0,[(n()(),l.ub(0,0,null,null,3,"ws-auth-collection",[],null,null,null,ye,ge)),l.Lb(512,null,dn,dn,[D.a,y.a,G.a]),l.Lb(512,null,bn,bn,[y.a,on.a,dn,G.a,ae.a]),l.tb(3,245760,null,0,me,[y.a,T.a,bn,dn,G.a,P.a,S.e,x.c,on.a,T.o,pe.a,D.a,$n.a],null,null)],(function(n,e){n(e,3,0)}),null)}var Ge=l.qb("ws-auth-collection",me,Me,{},{},[]),Ie=t("t68o"),Ee=t("NcP4"),_e=t("xYTU"),Pe=t("zbXB"),Oe=t("m5Fw"),De=t("g6nu"),Ne=t("8mlG"),Te=t("TrDA"),Ae=t("P0GQ"),Le=t("GQuQ"),$e=t("Pnip"),Be=t("8gZh"),Fe=t("jDNV"),Ue=t("mFNG"),Re=t("HoWc"),Qe=t("E1Ym"),je=t("KoYW"),qe=t("/xtD"),ze=t("v9oY"),He=t("3PxI"),Ve=t("Dz2M"),Ke=t("w5f3"),Je=t("R4DF"),We=t("gYEm"),Xe=t("Mo/a"),Ye=t("xQ1y"),Ze=t("GXO0"),nt=t("WxeX"),et=t("POq0"),tt=t("Xd0L"),lt=t("qJ5m"),it=t("/Co4"),at=t("JjoW"),ot=t("821u"),rt=t("JoiR"),ct=t("IheW"),ut=t("x86M"),st=t("gx4e"),dt=t("2ef/"),bt=t("ywAd");class ht{}var pt=t("BzsH"),mt=t("HsOI"),gt=t("oapL"),ft=t("ZwOa"),vt=t("FVPZ"),Ct=t("zMNK"),kt=t("qJ50"),wt=t("rWV4"),xt=t("mkRZ"),St=t("r0V8"),yt=t("5Bek"),Mt=t("c9fC"),Gt=t("02hT"),It=t("Q+lL"),Et=t("kNGD"),_t=t("W5yJ"),Pt=t("pBi1"),Ot=t("elxJ"),Dt=t("8P0U"),Nt=t("YD+O"),Tt=t("lT8R"),At=t("CP1y"),Lt=t("u0gr"),$t=t("lBuU"),Bt=t("jURF"),Ft=t("DU99"),Ut=t("Bheh"),Rt=t("6GCF"),Qt=t("fH49"),jt=t("o6Sk"),qt=t("3Fzu"),zt=t("FR07"),Ht=t("ABbz"),Vt=t("MDml"),Kt=t("3tBD"),Jt=t("ChE5"),Wt=t("JN0e"),Xt=t("DeLZ"),Yt=t("eGZd"),Zt=t("8qxy"),nl=t("xolN"),el=t("RDx4"),tl=t("bgzT"),ll=t("k6sU"),il=t("ohkd"),al=t("x8RB"),ol=t("WLeV"),rl=t("JRtc"),cl=t("dvZr");t.d(e,"CollectionModuleNgFactory",(function(){return ul}));var ul=l.rb(i,[],(function(n){return l.Db([l.Eb(512,l.j,l.bb,[[8,[a.a,Ge,Ie.a,Ee.a,_e.a,_e.b,Pe.b,Pe.a,Oe.a,De.a,Ne.a,Te.a,Ae.a,Le.a,$e.a,Be.a,Fe.a,Ue.a,Re.a,Qe.b,je.a,qe.a,ze.a,He.a,le.c,Ve.a,Ke.a,Je.a,We.a,Xe.a,Ye.a,Ze.a,nt.a]],[3,l.j],l.w]),l.Eb(4608,o.r,o.q,[l.t,[2,o.N]]),l.Eb(4608,et.c,et.c,[]),l.Eb(4608,tt.b,tt.b,[]),l.Eb(5120,lt.h,lt.a,[[3,lt.h]]),l.Eb(4608,b.d,b.d,[b.j,b.f,l.j,b.i,b.g,l.q,l.y,o.d,m.b,[2,o.k]]),l.Eb(5120,b.k,b.l,[b.d]),l.Eb(5120,U.c,U.k,[b.d]),l.Eb(5120,it.b,it.c,[b.d]),l.Eb(4608,w.f,w.f,[]),l.Eb(4608,w.D,w.D,[]),l.Eb(5120,S.c,S.d,[b.d]),l.Eb(135680,S.e,S.e,[b.d,l.q,[2,o.k],[2,S.b],S.c,[3,S.e],b.f]),l.Eb(5120,d.b,d.c,[b.d]),l.Eb(4608,g.e,tt.c,[[2,tt.g],[2,tt.l]]),l.Eb(5120,at.a,at.b,[b.d]),l.Eb(4608,ot.i,ot.i,[]),l.Eb(5120,ot.a,ot.b,[b.d]),l.Eb(4608,tt.a,tt.x,[[2,tt.f],p.a]),l.Eb(135680,u.h,u.h,[l.y,p.a]),l.Eb(4608,$.f,$.f,[l.M]),l.Eb(4608,rt.a,rt.a,[ct.c]),l.Eb(4608,D.a,D.a,[M.a,o.a]),l.Eb(4608,ut.a,ut.a,[]),l.Eb(4608,st.a,st.a,[G.a,ut.a,D.a]),l.Eb(4608,pe.a,pe.a,[rt.a,st.a,D.a,G.a]),l.Eb(4608,_.a,_.a,[rt.a,D.a,ct.c,M.a]),l.Eb(4608,En.i,En.i,[o.d,l.y,h.e,En.k]),l.Eb(4608,N.a,N.a,[rt.a]),l.Eb(4608,dt.a,dt.a,[]),l.Eb(4608,bt.a,bt.a,[]),l.Eb(1073742336,o.c,o.c,[]),l.Eb(1073742336,T.s,T.s,[[2,T.x],[2,T.o]]),l.Eb(1073742336,ht,ht,[]),l.Eb(1073742336,m.a,m.a,[]),l.Eb(1073742336,tt.l,tt.l,[[2,tt.d],[2,g.f]]),l.Eb(1073742336,v.c,v.c,[]),l.Eb(1073742336,pt.b,pt.b,[]),l.Eb(1073742336,et.d,et.d,[]),l.Eb(1073742336,mt.e,mt.e,[]),l.Eb(1073742336,p.b,p.b,[]),l.Eb(1073742336,gt.c,gt.c,[]),l.Eb(1073742336,ft.c,ft.c,[]),l.Eb(1073742336,tt.n,tt.n,[]),l.Eb(1073742336,vt.b,vt.b,[]),l.Eb(1073742336,Ct.g,Ct.g,[]),l.Eb(1073742336,tt.w,tt.w,[]),l.Eb(1073742336,c.c,c.c,[]),l.Eb(1073742336,kt.e,kt.e,[]),l.Eb(1073742336,lt.i,lt.i,[]),l.Eb(1073742336,u.a,u.a,[]),l.Eb(1073742336,wt.m,wt.m,[]),l.Eb(1073742336,xt.e,xt.e,[]),l.Eb(1073742336,Pn.h,Pn.h,[]),l.Eb(1073742336,h.c,h.c,[]),l.Eb(1073742336,b.h,b.h,[]),l.Eb(1073742336,U.j,U.j,[]),l.Eb(1073742336,U.g,U.g,[]),l.Eb(1073742336,St.d,St.d,[]),l.Eb(1073742336,St.c,St.c,[]),l.Eb(1073742336,L.h,L.h,[]),l.Eb(1073742336,tt.u,tt.u,[]),l.Eb(1073742336,tt.r,tt.r,[]),l.Eb(1073742336,it.e,it.e,[]),l.Eb(1073742336,w.C,w.C,[]),l.Eb(1073742336,w.z,w.z,[]),l.Eb(1073742336,w.m,w.m,[]),l.Eb(1073742336,S.k,S.k,[]),l.Eb(1073742336,d.e,d.e,[]),l.Eb(1073742336,yt.c,yt.c,[]),l.Eb(1073742336,Mt.d,Mt.d,[]),l.Eb(1073742336,Gt.b,Gt.b,[]),l.Eb(1073742336,It.e,It.e,[]),l.Eb(1073742336,x.f,x.f,[]),l.Eb(1073742336,at.d,at.d,[]),l.Eb(1073742336,Et.f,Et.f,[]),l.Eb(1073742336,ot.j,ot.j,[]),l.Eb(1073742336,tt.y,tt.y,[]),l.Eb(1073742336,tt.o,tt.o,[]),l.Eb(1073742336,_t.c,_t.c,[]),l.Eb(1073742336,Pt.d,Pt.d,[]),l.Eb(1073742336,Pt.c,Pt.c,[]),l.Eb(1073742336,$.d,$.d,[]),l.Eb(1073742336,B.e,B.e,[]),l.Eb(1073742336,Ot.d,Ot.d,[]),l.Eb(1073742336,Dt.c,Dt.c,[]),l.Eb(1073742336,Nt.b,Nt.b,[]),l.Eb(1073742336,Tt.b,Tt.b,[]),l.Eb(1073742336,At.a,At.a,[]),l.Eb(1073742336,Lt.a,Lt.a,[]),l.Eb(1073742336,$t.a,$t.a,[]),l.Eb(1073742336,Bt.a,Bt.a,[]),l.Eb(1073742336,Ft.a,Ft.a,[]),l.Eb(1073742336,Ut.a,Ut.a,[]),l.Eb(1073742336,Rt.a,Rt.a,[]),l.Eb(1073742336,Qt.a,Qt.a,[]),l.Eb(1073742336,jt.a,jt.a,[]),l.Eb(1073742336,qt.a,qt.a,[]),l.Eb(1073742336,zt.a,zt.a,[]),l.Eb(1073742336,En.j,En.j,[]),l.Eb(1073742336,Ht.a,Ht.a,[]),l.Eb(1073742336,Vt.a,Vt.a,[]),l.Eb(1073742336,Kt.a,Kt.a,[]),l.Eb(1073742336,Jt.a,Jt.a,[]),l.Eb(1073742336,Wt.a,Wt.a,[]),l.Eb(1073742336,Xt.a,Xt.a,[]),l.Eb(1073742336,Yt.a,Yt.a,[]),l.Eb(1073742336,Zt.a,Zt.a,[]),l.Eb(1073742336,nl.a,nl.a,[]),l.Eb(1073742336,el.a,el.a,[]),l.Eb(1073742336,tl.a,tl.a,[]),l.Eb(1073742336,ll.a,ll.a,[]),l.Eb(1073742336,i,i,[]),l.Eb(256,l.t,"en",[]),l.Eb(1024,T.m,(function(){return[[{path:"",component:me}],[{path:"viewer",component:ie.a}],[{path:"",component:il.a}],[{path:"viewer",component:ie.a}],[{path:"",component:al.a}],[{path:"viewer",component:ie.a}],[{path:"",component:ol.a}],[{path:"",component:rl.a}],[{path:"viewer",component:ie.a}]]}),[]),l.Eb(256,Et.a,{separatorKeyCodes:[cl.g]},[]),l.Eb(256,tt.e,tt.i,[]),l.Eb(256,S.a,Bt.b,[]),l.Eb(256,S.l,Bt.c,[])])}))}}]);